/*!
 *        ______      __
 *       / ____/_  __/ /__________  ____
 *      / /   / / / / __/ ___/ __ \/ __ \
 *     / /___/ /_/ / /_/ /  / /_/ / / / /
 *     \____/\__, /\__/_/   \____/_/ /_/    Cytron™ by Video++
 *          /____/
 * 
 *     cytron-platform@6.20.2-3554bda update on 2017-05-18 18:29:35
 * 
 * ****************************************************************
 */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="//cytroncdn.videojj.com/release/6.20.2/",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(73),d=o(f),p=n(131),h=o(p),v=n(8),g=o(v),y=n(23),m=n(10),b=r(m),_=n(7),w=n(144),T=o(w),O=n(143),E=o(O),I=n(145),k=o(I),M=n(115),S=r(M),A=n(157),C=o(A),P=n(153),x=o(P),j=n(155),N=o(j),D=n(158),R=n(154),L=o(R);(0,d["default"])("cytron-platform");var U=0,B=n(4)("Cytron");window.Cytron=function(){function e(t,n){a(this,e),this.__containerId=t,this.__config=n}return l(e,[{key:"start",value:function(){var e=this;if(this.hasStart())throw new Error("Cytron 已经启动了...");g["default"].debug&&(0,_.groupStartLog)("CYTRON_START"),this.rootId=g["default"].name+"-"+ ++U,B("=====> Starting Cytron...",this.rootId),this.$container=(0,D.getContainer)(this.__containerId),this.config=(0,D.getConfig)(this.__config),this.session=new C["default"](this.config,this.$container),this.api=new x["default"](this.config,this.session),this.errorReport=(0,D.getErrorReport)(this.api,this.session),window.addEventListener("error",this.errorReport),h["default"][this.rootId]=this;var t=(0,D.loadVideoConfig)(this.api,this.config).then(function(t){if(!e.hasStart())return{};if(b.assign(e.config,u({},t,e.config)),"normal"!==e.config.mode)return{};B("=====> Loading Cytron VideoData...");var n=e.config.videoDataUrl,r=e.config,o=r.videoDataEnable,i=r.globalDataEnable,s=r.adSummaryEnable;return{videoData:o!==!1?e.api.getVideoData(n):y.Promise.resolve(),globalData:i!==!1?e.api.getGlobalData():y.Promise.resolve(),adSummary:s!==!1?e.api.getAdSummary():y.Promise.resolve()}});y.Promise.all([(0,D.loadPlayerModule)(this.config),t]).then(function(t){var n=c(t,2),r=n[0],o=n[1];return B("=====> Cytron Player and Video Loaded...",o),B("=====> Waiting for player onReady callback..."),new y.Promise(function(t,n){e.player=r(e.$container,e.config),e.player.onError&&e.player.onError(function(e){B("=====> Player onError..."),n("Player onError "+e)}),e.player.onReady(function(){B("=====> Player onReady..."),t(o)})})}).then(function(t){var n=e.bootstrap(t);return g["default"].debug&&(0,_.groupEndLog)("CYTRON_START"),n})["catch"](function(t){(g["default"].debug||"Destroyed"!==t)&&(e.api&&e.api.trackError("Cytron Error: "+t),console.error("=====> Cytron Error: ",t))})}},{key:"bootstrap",value:function(e){var t=this;if(!this.hasStart())return this.destroy(),y.Promise.reject("Destroyed");this.api.track({cat:g["default"].trackCategory.videoView}),(0,D.startWindowTrack)(this.api);var n={clientId:this.session.getClientId(),videoId:this.session.getVideoId(),channelId:this.session.getChannel(),projectId:this.session.getProject()};if(this.flowManager=(0,T["default"])(n,this.session),this.adManager=(0,E["default"])(this,u({},n,{onActive:function(e){var n=e.flowMaps,r=e.flows;B("adManager onActive ",n,r),t.runner.registerModules(n),t.runner.registerFlows(r)},onInactive:function(e){var n=e.flows;B("adManager onInactive ",n),t.runner.removeFlows(n,"AD_FLOW")}})),this.runner=(0,k["default"])(this),this.actions=this.runner.getStore().bindActions(S),this.player.onPlay(this.runner.onPlay),this.player.onPause(this.runner.onPause),this.player.onStop(this.runner.onStop),this.player.onSetTime(this.runner.onSetTime),this.player.onFullscreen(this.runner.onFullscreen),this.player.onExitFullscreen(this.runner.onExitFullscreen),this.config.onReady&&this.config.onReady(this.player),this.config.disabled)return B("=====> Sorry, Cytron Not Support!",this),y.Promise.reject("Not Support!");this.runner.bootstrap(),this.mqttClient=new N["default"](u({},n,{parent:this.$container,onConnect:function(){t.api.track({cat:g["default"].trackCategory.mqttConnect}),t.api.mqttNotify()}})),this.mqttClient.setMsgListener("showFlow",function(e){var n=e.flowMaps,r=e.flows;t.runner&&(t.runner.registerModules(n),t.runner.registerFlows(r,"LIVE_FLOW"))}),this.mqttClient.setMsgListener("hideFlow",function(e){var n=e.flowId;t.runner&&t.runner.removeFlows([n],"LIVE_FLOW")});var r=e||{},o=r.videoData,i=r.globalData,s=r.adSummary;o&&o.then(function(e){t.runner&&e&&(B("=====> Register Video Data...",e),t.runner.registerModules(e.flowMaps),t.runner.registerFlows(e.flows))}),i&&i.then(function(e){t.runner&&e&&(B("=====> Register Global Flows...",e),t.runner.registerModules(e.flowMaps),t.runner.registerFlows(e.flows))}),s&&s.then(function(e){t.adManager&&e&&(B("=====> Register Ad Summary...",e),t.adManager.registerAds(e))});var a=[],c=this.player.opts||{},l=this.config.editorEnable!==!1&&"normal"===this.config.mode&&this.session.getToken(),f=(void 0!==this.__config.vorEnable?this.config.vorEnable:c.vorEnable)&&"normal"===this.config.mode&&this.session.getIdentity(),d=(void 0!==this.__config.vnewsEnable?this.config.vnewsEnable:c.vnewsEnable)&&"normal"===this.config.mode&&this.session.getIdentity(),p=(void 0!==this.__config.vpushEnable?this.config.vpushEnable:c.vpushEnable)&&"normal"===this.config.mode&&this.session.getIdentity(),h=(this.__config.h5Enable||c.h5Enable)&&"mobile"===this.config.mode;return l&&a.push("plugin.editor"),f&&a.push("plugin.vor"),d&&a.push("plugin.vNews"),h&&a.push("plugin.h5"),p&&a.push("plugin.vPush"),g["default"].debug&&a.push("plugin.debug"),this.runner.registerPlugins(a),this.player.isPlaying()&&(B("=====> Runner Started ..."),this.runner.onPlay()),g["default"].cyTime&&this.player.jumpTo(g["default"].cyTime),this.config.onStart&&this.config.onStart(this),B("=====> Cytron Started!",this),y.Promise.resolve("Done!")}},{key:"destroy",value:function(){g["default"].debug||delete h["default"][this.rootId],this.rootId&&B("=====> Cytron Destroy ...",this.rootId),window.removeEventListener("error",this.errorReport),this.errorReport&&this.errorReport.cancel(),this.runner&&this.runner.destroy(),this.player&&this.player.destroy(),this.mqttClient&&this.mqttClient.disconnect(),this.errorReport=void 0,this.runner=void 0,this.player=void 0,this.mqttClient=void 0,this.flowManager=void 0,this.adManager=void 0,this.session=void 0,this.config=void 0,this.actions=void 0,this.$container=void 0,this.rootId=void 0,(0,D.stopWindowTrack)()}},{key:"hasStart",value:function(){return Boolean(this.rootId)}}]),e}(),window.Iva=function(e){function t(e,n){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.start(),r}return s(t,e),t}(Cytron),(0,L["default"])()},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.preact},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.csjs},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.jsxKit},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.debug},,,function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.helper},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.config},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.storage},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.polyfills},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=r({},{apiAddress:"//cytron.videojj.com/api",authApiAddress:"//videojj.com/api",meApiAddress:"//me.videojj.com/api",vaApiAddress:"//va.videojj.com",publicUrl:"//cytroncdn.videojj.com/release/6.20.2/",coreJsUrl:"//cytroncdn.videojj.com/latest/cytron.core.js",liveJsUrl:"//sdkcdn.videojj.com/liveOS/liveOS.js",myStoreUrl:"http://store.videojj.com/",consoleUrl:"http://cytron.videojj.com/console",version:"6.20.2",assertsUrl:"//cytroncdn.videojj.com/asserts",date:"2017-05-18T10:29:35.957Z",name:"cytron-platform"},{fps:2,serviceType:{alias:"VideoOS",value:3},trackCategory:{videoView:{alias:"视频准备就绪",value:4},videoPause:{alias:"视频暂停",value:17},videoPlay:{alias:"视频播放",value:16},videoClose:{alias:"视频关闭",value:19},videoDrag:{alias:"视频拖动",value:18},videoFocus:{alias:"视频获取焦点",value:25},videoBlur:{alias:"视频失去焦点",value:26},tagNodeView:{alias:"热点显示",value:12},tagNodeClick:{alias:"热点点击",value:9},infoNodeView:{alias:"信息层显示",value:34},infoNodeClose:{alias:"信息层关闭",value:20},infoNodeClick:{alias:"信息层有效点击",value:11},infoNodeLink:{alias:"信息层外链点击",value:47},nodeJump:{alias:"节点跳转",value:35},mqttConnect:{alias:"连接MQTT",value:33}}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.script=t.resizeDetector=t.copy=t.shallowEqual=t.debounce=t.assert=t.rgba=t.uid=void 0;var o=n(53);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(59);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var s=n(33);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var a=n(50);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var c=n(49);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=n(52);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var l=n(46);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var f=n(51);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var d=n(58),p=r(d),h=n(55),v=r(h),g=n(45),y=r(g),m=n(48),b=r(m),_=n(57),w=r(_),T=n(47),O=r(T),E=n(54),I=r(E),k=n(56),M=r(k);t.uid=p["default"],t.rgba=v["default"],t.assert=y["default"],t.debounce=b["default"],t.shallowEqual=w["default"],t.copy=O["default"],t.resizeDetector=I["default"],t.script=M["default"]},,,,function(e,t,n){"use strict";var r="cy",o=function(e){return n(101)(r+":"+e)};o.enable=function(){localStorage.debug=r+":*"},e.exports=o},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){(function(t,r){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){Q=e}function s(e){$=e}function a(){return function(){return t.nextTick(d)}}function c(){return function(){G(d)}}function u(){var e=0,t=new Z(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<K;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}K=0}function p(){try{var e=n(106);return G=e.runOnLoop||e.runOnContext,c()}catch(t){return f()}}function h(e,t){var n=arguments,r=this,o=new this.constructor(g);void 0===o[oe]&&D(o);var i=r._state;return i?!function(){var e=n[i-1];$(function(){return x(i,o,e,r._result)})}():S(r,o,e,t),o}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return E(n,e),n}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ce.error=t,ce}}function _(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function w(e,t,n){$(function(e){var r=!1,o=_(n,t,function(n){r||(r=!0,t!==n?E(e,n):k(e,n))},function(t){r||(r=!0,M(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,M(e,o))},e)}function T(e,t){t._state===se?k(e,t._result):t._state===ae?M(e,t._result):S(t,void 0,function(t){return E(e,t)},function(t){return M(e,t)})}function O(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===v?T(e,t):n===ce?M(e,ce.error):void 0===n?k(e,t):o(n)?w(e,t,n):k(e,t)}function E(t,n){t===n?M(t,y()):e(n)?O(t,n,b(n)):k(t,n)}function I(e){e._onerror&&e._onerror(e._result),A(e)}function k(e,t){e._state===ie&&(e._result=t,e._state=se,0!==e._subscribers.length&&$(A,e))}function M(e,t){e._state===ie&&(e._state=ae,e._result=t,$(I,e))}function S(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+se]=n,o[i+ae]=r,0===i&&e._state&&$(A,e)}function A(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?x(n,r,o,i):o(i);e._subscribers.length=0}}function C(){this.error=null}function P(e,t){try{return e(t)}catch(n){return ue.error=n,ue}}function x(e,t,n,r){var i=o(n),s=void 0,a=void 0,c=void 0,u=void 0;if(i){if(s=P(n,r),s===ue?(u=!0,a=s.error,s=null):c=!0,t===s)return void M(t,m())}else s=r,c=!0;t._state!==ie||(i&&c?E(t,s):u?M(t,a):e===se?k(t,s):e===ae&&M(t,s))}function j(e,t){try{t(function(t){E(e,t)},function(t){M(e,t)})}catch(n){M(e,n)}}function N(){return le++}function D(e){e[oe]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function R(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[oe]||D(this.promise),W(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):M(this.promise,L())}function L(){return new Error("Array Methods must be provided an Array")}function U(e){return new R(this,e).promise}function B(e){var t=this;return new t(W(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(g);return M(n,e),n}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[oe]=N(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&q(),this instanceof H?j(this,e):V())}function z(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===o&&!n.cast)return}e.Promise=H}var Y=void 0;Y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var W=Y,K=0,G=void 0,Q=void 0,$=function(e,t){ne[K]=e,ne[K+1]=t,K+=2,2===K&&(Q?Q(d):re())},J="undefined"!=typeof window?window:void 0,X=J||{},Z=X.MutationObserver||X.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?a():Z?u():te?l():void 0===J?p():f();var oe=Math.random().toString(36).substring(16),ie=void 0,se=1,ae=2,ce=new C,ue=new C,le=0;return R.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ie&&n<e;n++)this._eachEntry(t[n],n)},R.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===v){var o=b(e);if(o===h&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===H){var i=new n(g);O(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},R.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ie&&(this._remaining--,e===ae?M(r,n):this._result[t]=n),0===this._remaining&&k(r,this._result)},R.prototype._willSettleAt=function(e,t){var n=this;S(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ae,t,e)})},H.all=U,H.race=B,H.resolve=v,H.reject=F,H._setScheduler=i,H._setAsap=s,H._asap=$,H.prototype={constructor:H,then:h,"catch":function(e){return this.then(null,e)}},z(),H.polyfill=z,H.Promise=H,H})}).call(t,n(105),function(){return this}())},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){d.parentNode||(d.setAttribute("type","text/css"),d.setAttribute("id",f["default"].name+"-style"),document.getElementsByTagName("head")[0].appendChild(d));var e=p.join("");return"textContent"in d?d.textContent=e:d.styleSheet.cssText=e,d}function i(){var e=Array.prototype.slice.call(arguments),t=a["default"].apply(null,e),n=a["default"].getCss(t);return p.indexOf(n)===-1&&p.push(n),t}Object.defineProperty(t,"__esModule",{value:!0}),t.initModuleCSS=o,t.csjsModule=i,t["default"]=function(){var e=Array.prototype.slice.call(arguments),t=i.apply(null,e);return Object.keys(t).reduce(function(e,n){return e[n]=t[n].toString(),e},{})};var s=n(92),a=r(s),c=n(44),u=r(c),l=n(16),f=r(l),d=document.createElement("style"),p=[u["default"]]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CytronPlugin=t.CytronNode=t.TransitionGroup=t.cx=t.pure=t.prefixer=void 0;var o=n(42),i=r(o),s=n(63),a=r(s),c=n(62),u=r(c),l=n(104),f=r(l),d=n(60),p=r(d),h=n(61),v=r(h);t.prefixer=i["default"],t.pure=a["default"],t.cx=u["default"],t.TransitionGroup=f["default"],t.CytronNode=p["default"],t.CytronPlugin=v["default"]},,,function(e,t){"use strict";function n(e,t,n){var r=e.join(" ");return Object.create(o.prototype,{classNames:{value:Object.freeze(e),configurable:!1,writable:!1,enumerable:!0},unscoped:{value:Object.freeze(t),configurable:!1,writable:!1,enumerable:!0},className:{value:r,configurable:!1,writable:!1,enumerable:!0},selector:{value:e.map(function(e){return n?e:"."+e}).join(", "),configurable:!1,writable:!1,enumerable:!0},toString:{value:function(){return r},configurable:!1,writeable:!1,enumerable:!1}})}function r(e){return e instanceof o}function o(){}e.exports={makeComposition:n,isComposition:r}},function(e,t,n){!function(e,n){n(t)}(this,function(e){function t(e,t,n){this.nodeName=e,this.attributes=t,this.children=n,this.key=t&&t.key}function n(e,n){var r,o,i,s,a=[];for(s=arguments.length;s-- >2;)B.push(arguments[s]);for(n&&n.children&&(B.length||B.push(n.children),delete n.children);B.length;)if((o=B.pop())instanceof Array)for(s=o.length;s--;)B.push(o[s]);else null!=o&&o!==!1&&("number"!=typeof o&&o!==!0||(o=String(o)),i="string"==typeof o,i&&r?a[a.length-1]+=o:(a.push(o),r=i));var c=new t(e,n||void 0,a);return U.vnode&&U.vnode(c),c}function r(e,t){if(t)for(var n in t)e[n]=t[n];return e}function o(e){return r({},e)}function i(e,t){for(var n=t.split("."),r=0;r<n.length&&e;r++)e=e[n[r]];return e}function s(e){return"function"==typeof e}function a(e){return"string"==typeof e}function c(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function u(e,t){return n(e.nodeName,r(o(e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function l(e,t,n){var r=t.split(".");return function(t){for(var o=t&&t.target||this,s={},c=s,u=a(n)?i(t,n):o.nodeName?o.type.match(/^che|rad/)?o.checked:o.value:t,l=0;l<r.length-1;l++)c=c[r[l]]||(c[r[l]]=!l&&e.state[r[l]]||{});c[r[l]]=u,e.setState(s)}}function f(e){!e._dirty&&(e._dirty=!0)&&1==G.push(e)&&(U.debounceRendering||H)(d)}function d(){var e,t=G;for(G=[];e=t.pop();)e._dirty&&j(e)}function p(e){var t=e&&e.nodeName;return t&&s(t)&&!(t.prototype&&t.prototype.render)}function h(e,t){return e.nodeName(y(e),t||z)}function v(e,t){return a(t)?e instanceof Text:a(t.nodeName)?!e._componentConstructor&&g(e,t.nodeName):s(t.nodeName)?!e._componentConstructor||e._componentConstructor===t.nodeName||p(t):void 0}function g(e,t){return e.normalizedNodeName===t||q(e.nodeName)===q(t)}function y(e){var t=o(e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function b(e,t,n,r,o){if("className"===t&&(t="class"),"class"===t&&r&&"object"==typeof r&&(r=c(r)),"key"===t);else if("class"!==t||o)if("style"===t){if((!r||a(r)||a(n))&&(e.style.cssText=r||""),r&&"object"==typeof r){if(!a(n))for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"!=typeof r[i]||W[i]?r[i]:r[i]+"px"}}else if("dangerouslySetInnerHTML"===t)e.innerHTML=r&&r.__html||"";else if("o"==t[0]&&"n"==t[1]){var u=e._listeners||(e._listeners={});t=q(t.substring(2)),r?u[t]||e.addEventListener(t,w,!!K[t]):u[t]&&e.removeEventListener(t,w,!!K[t]),u[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e)_(e,t,null==r?"":r),null!=r&&r!==!1||e.removeAttribute(t);else{var l=o&&t.match(/^xlink\:?(.+)/);null==r||r===!1?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",q(l[1])):e.removeAttribute(t):"object"==typeof r||s(r)||(l?e.setAttributeNS("http://www.w3.org/1999/xlink",q(l[1]),r):e.setAttribute(t,r))}else e.className=r||""}function _(e,t,n){try{e[t]=n}catch(r){}}function w(e){return this._listeners[e.type](U.event&&U.event(e)||e)}function T(e){if(m(e),e instanceof Element){e._component=e._componentConstructor=null;var t=e.normalizedNodeName||q(e.nodeName);(Q[t]||(Q[t]=[])).push(e)}}function O(e,t){var n=q(e),r=Q[n]&&Q[n].pop()||(t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e));return r.normalizedNodeName=n,r}function E(){for(var e;e=$.pop();)U.afterMount&&U.afterMount(e),e.componentDidMount&&e.componentDidMount()}function I(e,t,n,r,o,i){J++||(X=o instanceof SVGElement,Z=e&&!(Y in e));var s=k(e,t,n,r);return o&&s.parentNode!==o&&o.appendChild(s),--J||(Z=!1,i||E()),s}function k(e,t,n,r){for(var o=t&&t.attributes;p(t);)t=h(t,n);if(null==t&&(t=""),a(t))return e&&e instanceof Text?e.nodeValue!=t&&(e.nodeValue=t):(e&&S(e),e=document.createTextNode(t)),e[Y]=!0,e;if(s(t.nodeName))return N(e,t,n,r);var i=e,c=String(t.nodeName),u=X,l=t.children;if(X="svg"===c||"foreignObject"!==c&&X,e){if(!g(e,c)){for(i=O(c,X);e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),S(e)}}else i=O(c,X);var f=i.firstChild,d=i[Y];if(!d){i[Y]=d={};for(var v=i.attributes,y=v.length;y--;)d[v[y].name]=v[y].value}return A(i,t.attributes,d),!Z&&l&&1===l.length&&"string"==typeof l[0]&&f&&f instanceof Text&&!f.nextSibling?f.nodeValue!=l[0]&&(f.nodeValue=l[0]):(l&&l.length||f)&&M(i,l,n,r),o&&"function"==typeof o.ref&&(d.ref=o.ref)(i),X=u,i}function M(e,t,n,r){var o,i,s,a,c=e.childNodes,u=[],l={},f=0,d=0,p=c.length,h=0,g=t&&t.length;if(p)for(var y=0;y<p;y++){var b=c[y],_=b[Y],w=g?(i=b._component)?i.__key:_?_.key:null:null;null!=w?(f++,l[w]=b):(Z||_)&&(u[h++]=b)}if(g)for(var y=0;y<g;y++){s=t[y],a=null;var w=s.key;if(null!=w)f&&w in l&&(a=l[w],l[w]=void 0,f--);else if(!a&&d<h)for(o=d;o<h;o++)if(i=u[o],i&&v(i,s)){a=i,u[o]=void 0,o===h-1&&h--,o===d&&d++;break}a=k(a,s,n,r),a&&a!==e&&(y>=p?e.appendChild(a):a!==c[y]&&(a===c[y+1]&&m(c[y]),e.insertBefore(a,c[y]||null)))}if(f)for(var y in l)l[y]&&S(l[y]);for(;d<=h;)a=u[h--],a&&S(a)}function S(e,t){var n=e._component;if(n)D(n,!t);else{e[Y]&&e[Y].ref&&e[Y].ref(null),t||T(e);for(var r;r=e.lastChild;)S(r,t)}}function A(e,t,n){for(var r in n)t&&r in t||null==n[r]||b(e,r,n[r],n[r]=void 0,X);if(t)for(var o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||b(e,o,n[o],n[o]=t[o],X)}function C(e){var t=e.constructor.name,n=ee[t];n?n.push(e):ee[t]=[e]}function P(e,t,n){var r=new e(t,n),o=ee[e.name];if(R.call(r,t,n),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function x(e,t,n,r,o){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&U.syncComponentUpdates===!1&&e.base?f(e):j(e,1,o)),e.__ref&&e.__ref(e))}function j(e,t,n,i){if(!e._disable){var a,c,u,l,f=e.props,d=e.state,v=e.context,g=e.prevProps||f,m=e.prevState||d,b=e.prevContext||v,_=e.base,w=e.nextBase,T=_||w,O=e._component;if(_&&(e.props=g,e.state=m,e.context=b,2!==t&&e.shouldComponentUpdate&&e.shouldComponentUpdate(f,d,v)===!1?a=!0:e.componentWillUpdate&&e.componentWillUpdate(f,d,v),e.props=f,e.state=d,e.context=v),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!a){for(e.render&&(c=e.render(f,d,v)),e.getChildContext&&(v=r(o(v),e.getChildContext()));p(c);)c=h(c,v);var k,M,A=c&&c.nodeName;if(s(A)){var C=y(c);u=O,u&&u.constructor===A&&C.key==u.__key?x(u,C,1,v):(k=u,u=P(A,C,v),u.nextBase=u.nextBase||w,u._parentComponent=e,e._component=u,x(u,C,0,v),j(u,1,n,!0)),M=u.base}else l=T,k=O,k&&(l=e._component=null),(T||1===t)&&(l&&(l._component=null),M=I(l,c,v,n||!_,T&&T.parentNode,!0));if(T&&M!==T&&u!==O){var N=T.parentNode;N&&M!==N&&(N.replaceChild(M,T),k||(T._component=null,S(T)))}if(k&&D(k,M!==T),e.base=M,M&&!i){for(var R=e,L=e;L=L._parentComponent;)(R=L).base=M;M._component=R,M._componentConstructor=R.constructor}}!_||n?$.unshift(e):a||(e.componentDidUpdate&&e.componentDidUpdate(g,m,b),U.afterUpdate&&U.afterUpdate(e));var B,F=e._renderCallbacks;if(F)for(;B=F.pop();)B.call(e);J||i||E()}}function N(e,t,n,r){for(var o=e&&e._component,i=e,s=o&&e._componentConstructor===t.nodeName,a=s,c=y(t);o&&!a&&(o=o._parentComponent);)a=o.constructor===t.nodeName;return o&&a&&(!r||o._component)?(x(o,c,3,n,r),e=o.base):(o&&!s&&(D(o,!0),e=i=null),o=P(t.nodeName,c,n),e&&!o.nextBase&&(o.nextBase=e,i=null),x(o,c,1,n,r),e=o.base,i&&e!==i&&(i._component=null,S(i))),e}function D(e,t){U.beforeUnmount&&U.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;if(r)D(r,t);else if(n){n[Y]&&n[Y].ref&&n[Y].ref(null),e.nextBase=n,t&&(m(n),C(e));for(var o;o=n.lastChild;)S(o,!t)}e.__ref&&e.__ref(null),e.componentDidUnmount&&e.componentDidUnmount()}function R(e,t){this._dirty=!0,this.context=t,this.props=e,this.state||(this.state={})}function L(e,t,n){return I(n,e,{},!1,t)}var U={},B=[],F={},q=function(e){return F[e]||(F[e]=e.toLowerCase())},V="undefined"!=typeof Promise&&Promise.resolve(),H=V?function(e){V.then(e)}:setTimeout,z={},Y="undefined"!=typeof Symbol?Symbol["for"]("preactattr"):"__preactattr_",W={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},K={blur:1,error:1,focus:1,load:1,resize:1,scroll:1},G=[],Q={},$=[],J=0,X=!1,Z=!1,ee={};r(R.prototype,{linkState:function(e,t){var n=this._linkedStates||(this._linkedStates={});return n[e+t]||(n[e+t]=l(this,e,t))},setState:function(e,t){var n=this.state;this.prevState||(this.prevState=o(n)),r(n,s(e)?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),f(this)},forceUpdate:function(){j(this,2)},render:function(){}}),e.h=n,e.cloneElement=u,e.Component=R,e.render=L,e.rerender=d,e.options=U})},,,function(e,t){"use strict";function n(e){return null==e||""===e||!(!Array.isArray(e)||0!==e.length)||"object"===("undefined"==typeof e?"undefined":s(e))&&0===Object.keys(e).length}function r(e){return"function"==typeof e}function o(e){return!isNaN(parseFloat(e))&&isFinite(e)}function i(e){if(!e||"object"!==("undefined"==typeof e?"undefined":s(e)))return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&a(n)===c}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isEmpty=n,t.isFunction=r,t.isNumeric=o,t.isPlainObject=i;var a=function(e){return Function.prototype.toString.call(e)},c=a(Object)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(67);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}),n(66)},function(e,t,n){var r=n(83),o=n(22),i=n(81),s="prototype",a=function(e,t,n){var c,u,l,f=e&a.F,d=e&a.G,p=e&a.S,h=e&a.P,v=e&a.B,g=e&a.W,y=d?o:o[t]||(o[t]={}),m=d?r:p?r[t]:(r[t]||{})[s];d&&(n=t);for(c in n)u=!f&&m&&c in m,u&&c in y||(l=u?m[c]:n[c],y[c]=d&&"function"!=typeof m[c]?n[c]:v&&u?i(l,r):g&&m[c]==l?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[s]=e[s],t}(l):h&&"function"==typeof l?i(Function.call,l):l,h&&((y[s]||(y[s]={}))[c]=l))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,e.exports=a},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(82);e.exports=function(e){return Object(r(e))}},function(e,t){"use strict";e.exports=" css "},,,function(e,t,n){!function(){function e(e){this.message=e}var n=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(t){for(var n,o,i=String(t),s=0,a=r,c="";i.charAt(0|s)||(a="=",s%1);c+=a.charAt(63&n>>8-s%1*8)){if(o=i.charCodeAt(s+=.75),o>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return c}),n.atob||(n.atob=function(t){var n=String(t).replace(/[=]+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,a=0,c="";i=n.charAt(a++);~i&&(o=s%4?64*o+i:i,s++%4)?c+=String.fromCharCode(255&o>>(-2*s&6)):0)i=r.indexOf(i);return c})}()},function(e,t,n){var r=n(76)["default"],o=n(75)["default"];
!function(e){e()}(function(){"use strict";function t(e,t,n,i){function s(e,t){return c(n,e)&&(i||c(I,t))?n.replace(e,["",t.toLowerCase(),e].join("-")):null}function l(e){return E[e].reduce(function(t,n){return t[n.toLowerCase()]=s(e,n),t},{})}function f(n){var r=u(n).filter(function(e){return null!==e}).map(function(e){return t+":"+e}).join(";");r&&(e[t]=e[t]+";"+r)}function d(){return n.replace("flex-","").toLowerCase()}var p=!0;if("flex"===n&&"display"===t){var h=l("flex");return h.ms&&(h.ms=h.ms.replace("flex","flexbox")),f(h),p&&(e[t]="-webkit-box;display:"+e[t]),e}var v=r(E).filter(function(e){return"flex"!==e}).reduce(function(e,t){return e[t]=l(t),e},{});if(O[t]){var g=i?O[t]:O[t].filter(function(e){return c(I,e)}),y=g.reduce(function(e,o){var i=n;return r(v).forEach(function(e){var t=v[e];r(t).forEach(function(e){t[e]&&a(o)===a(e)&&(i=t[e],t[e]=null)})}),e[o+a(t)]=i,e},{});if(p)switch(t){case"flexDirection":c(n,"reverse")?y.WebkitBoxDirection="reverse":y.WebkitBoxDirection="normal",c(n,"row")?y.WebkitBoxOrient=y.boxOrient="horizontal":c(n,"column")&&(y.WebkitBoxOrient="vertical");break;case"alignSelf":y.msFlexItemAlign=d();break;case"alignItems":y.WebkitBoxAlign=y.msFlexAlign=d();break;case"alignContent":"spaceAround"===n?y.msFlexLinePack="distribute":"spaceBetween"===n?y.msFlexLinePack="justify":y.msFlexLinePack=d();break;case"justifyContent":"spaceAround"===n?y.msFlexPack="distribute":"spaceBetween"===n?y.WebkitBoxPack=y.msFlexPack="justify":y.WebkitBoxPack=y.msFlexPack=d();break;case"flexBasis":y.msFlexPreferredSize=n;break;case"order":y.msFlexOrder="-moz-calc("+n+")",y.WebkitBoxOrdinalGroup="-webkit-calc("+(parseInt(n)+1)+")";break;case"flexGrow":y.WebkitBoxFlex=y.msFlexPositive=n;break;case"flexShrink":y.msFlexNegative=n;break;case"flex":y.WebkitBoxFlex=n}o(e,y)}return r(v).forEach(function(e){f(v[e])}),e}function n(e,o){return r(e).forEach(function(r){var i=e[r];"object"==typeof i?n(i,o):e=t(e,r,i,o)}),e}function i(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return"boolean"==typeof e?function(t){return n(t,e)}:e?n(e,t):{}}var s={range:function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},capitalize:function(e){return e&&e.charAt(0).toUpperCase()+e.substring(1)},includes:function(e,t){return"number"==typeof e&&(e=e.toString()),e.indexOf(t)!==-1},values:function(e){return r(e).map(function(t){return e[t]})}},a=s.capitalize,c=s.includes,u=s.values,l="Webkit",f="Moz",d="ms",p="o",h=[l],v=[l,p],g=[f],y=[d],m=[l,f],b=[l,f,p],_=[l,f,d],w=[l,d],T=[l,d,f,p],O={alignContent:h,alignItems:h,alignSelf:h,animation:m,animationDelay:m,animationDirection:m,animationDuration:m,animationFillMode:m,animationIterationCount:m,animationName:m,animationPlayState:m,animationTimingFunction:m,appearance:m,backfaceVisibility:m,backgroundClip:h,borderImage:b,borderImageSlice:b,boxShadow:_,boxSizing:m,clipPath:h,columns:m,cursor:m,flex:w,flexBasis:w,flexDirection:w,flexFlow:w,flexGrow:w,flexShrink:w,flexWrap:w,fontSmoothing:m,justifyContent:m,order:m,perspective:m,perspectiveOrigin:m,transform:_,transformOrigin:_,transformOriginX:_,transformOriginY:_,transformOriginZ:_,transformStyle:_,transition:_,transitionDelay:_,transitionDuration:_,transitionProperty:_,transitionTimingFunction:_,userSelect:_},E={calc:m,flex:w},I=function(){if("undefined"==typeof navigator)return T;var e=navigator.userAgent;return c(e,"Chrome")?h:c(e,"Safari")?h:c(e,"Opera")?v:c(e,"Firefox")?g:c(e,"MSIE")?y:[]}();e.exports=i})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ua=navigator.userAgent.toLowerCase(),r=/android|ios|iphone|ipad|ipod|mobile|blackberry/,o=n.indexOf("msie")!==-1&&parseInt(n.split("msie")[1]),i=(t.notSupport=o&&o<10||/blackberry/.test(n),t.isModern=!o||o>10,t.isMobile=r.test(n),/micromessenger/),s=(t.isWeChat=i.test(n),/firefox/);t.isFireFox=s.test(n)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),i=r(o),s=i["default"].name;t["default"]="\n  ."+s+" *,\n  ."+s+" *:before,\n  ."+s+" *:after {\n    font-family: 'Helvetica Neue',Helvetica,'PingFang SC','Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif !important;\n    font-weight: 500;\n    box-sizing: border-box;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n    font-size: 100%;\n    font-variant-ligatures: none;\n    text-shadow: rgba(0, 0, 0, .01) 0 0 1px;\n    text-rendering: optimizeLegibility;\n    font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    -webkit-text-size-adjust: 100%;\n    -webkit-font-variant-ligatures: none;\n    -ms-overflow-style: none;\n  }\n  ."+s+" *::-webkit-scrollbar {\n    display: none;\n  }\n  ."+s+" audio,\n  ."+s+" canvas,\n  ."+s+" video { display:inline-block; }\n  ."+s+" audio:not([controls]) { display:none;height:0; }\n  ."+s+" a:active,\n  ."+s+" a:hover { outline:0; }\n  ."+s+" b,strong { font-weight:bold; }\n  ."+s+" hr { -moz-box-sizing:content-box; box-sizing:content-box;height:0; }\n  ."+s+" code,\n  ."+s+" pre,\n  ."+s+" samp { font-size:1em; }\n  ."+s+" pre { white-space:pre-wrap; }\n  ."+s+' q { quotes:"\\201C" "\\201D" "\\2018" "\\2019"; }\n  .'+s+" small { font-size:80%; }\n  ."+s+" img { border:0; }\n  ."+s+" svg:not(:root) { overflow:hidden; }\n  ."+s+" figure { margin:0; }\n  ."+s+" fieldset { border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em; }\n  ."+s+" button,\n  ."+s+" input,\n  ."+s+" select,\n  ."+s+" textarea { font-family:inherit; font-size:100%; margin:0; resize: none; }\n  ."+s+" button,\n  ."+s+" input { line-height:normal; }\n  ."+s+" button,\n  ."+s+" select { text-transform:none; }\n  ."+s+" button,\n  ."+s+' input[type="button"],\n  .'+s+' input[type="reset"],\n  .'+s+' input[type="submit"] { -webkit-appearance:button;cursor:pointer; }\n  .'+s+" button[disabled],\n  ."+s+" input[disabled] { cursor:default; }\n  ."+s+' input[type="checkbox"],\n  .'+s+' input[type="radio"] { box-sizing:border-box;padding:0; }\n  .'+s+' input[type="search"] { -webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box; }\n  .'+s+' input[type="search"]::-webkit-search-cancel-button,\n  .'+s+' input[type="search"]::-webkit-search-decoration { -webkit-appearance:none; }\n  .'+s+" button::-moz-focus-inner,\n  ."+s+" input::-moz-focus-inner { border:0;padding:0; }\n  ."+s+" textarea { overflow:auto;vertical-align:top; }\n  ."+s+" .clearfix:after,\n  ."+s+' .clearfix:before { content: " "; display: table; }\n  .'+s+" .clearfix:after { clear: both; }\n  ."+s+" {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: 0;\n    padding: 0;\n    border: none;\n    display: block;\n    line-height: 1;\n    overflow: hidden;\n    pointer-events: none;\n    background: none;\n    z-index: 100;\n  }\n"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e){var r="[AssertError] "+t||"错误的值: "+e;if(n)throw new Error(r);return console.error(r),!1}return!0}},function(e,t){"use strict";function n(e){return console.group?void console.group(e):void console.log("=== GroupStart ===> ",e)}function r(e){return console.groupEnd?void console.groupEnd(e):void console.log("=== GroupEnd ===> ",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.groupStartLog=n,t.groupEndLog=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){if((0,r.isFunction)(e))return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return console.error("Unable to copy obj: "+e),e}};var r=n(33)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=void 0,o=function(){for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];t&&!r&&n.apply(void 0,i),r&&clearTimeout(r),r=setTimeout(function(){r=null,t||n.apply(void 0,i)},e)};return o.cancel=function(){clearTimeout(r),r=null},o}}},function(e,t){"use strict";function n(e){return e&&e.nodeName?e:"string"==typeof e?0===e.indexOf(".")?document.getElementsByClassName(e.slice(1))[0]:0===e.indexOf("#")?document.getElementById(e.replace("#","")):document.getElementById(e):null}function r(e){var t=e.style.position;["fixed","absolute","relative"].indexOf(t)===-1&&(e.style.position="relative")}Object.defineProperty(t,"__esModule",{value:!0}),t.getElement=n,t.setRelateveStyle=r},function(e,t,n){"use strict";function r(e,t){e=(0,a.isNumeric)(e)?e:0;var n=parseInt(e,10)/1e3,r=Math.floor(n/3600),o=Math.floor((n-3600*r)/60),i=Math.floor(n-3600*r-60*o);return r<10&&(r="0"+r),o<10&&(o="0"+o),i<10&&(i="0"+i),"mins"===t?o+":"+i:r+":"+o+":"+i}function o(e){var t=[1e8,59,59],n=e.split(":").map(function(e,n){return!(0,a.isNumeric)(e)||e<0?0:e>t[n]?t[n]:parseInt(e,10)});return 2===n.length?1e3*(60*i(n[0])+i(n[1])):1e3*(60*i(n[0])*60+60*i(n[1])+i(n[2]))}function i(e){return(0,a.isNumeric)(e)?Number(e):0}function s(e,t){if(!e)return 0;var n=1e7;return e>n?(e/1e4).toFixed(t)+"万":e}Object.defineProperty(t,"__esModule",{value:!0}),t.msToHHMMSS=r,t.hhmmssToMS=o,t.toNumber=i,t.readableNum=s;var a=n(17)},function(e,t){"use strict";function n(e){if(e){var t=a.find(function(t){return e[t]});e[t]()}}function r(){var e=c.find(function(e){return document[e]});document[e]()}function o(){var e=u.find(function(e){return void 0!==document[e]});return l[u.indexOf(e)]}function i(){var e=u.find(function(e){return void 0!==document[e]});return document[e]}function s(){return null!==a.find(function(e){return root[e]})}Object.defineProperty(t,"__esModule",{value:!0}),t.requestFullscreen=n,t.exitFullscreen=r,t.getFullscreenChangeEvent=o,t.isFullscreen=i,t.fullScreenEnable=s;var a=t.requestFullscreenAPI=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],c=t.cancelFullscreenAPI=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],u=t.isFullscreenAPI=["fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement"],l=t.fullscreenChangeEvents=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"]},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}function r(e){var t=void 0;if(null==e||"object"!=("undefined"==typeof e?"undefined":o(e)))return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=r(e[n]);return t}if(e instanceof Object){t={};for(var s in e)e.hasOwnProperty(s)&&(t[s]=r(e[s]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.compose=n,t.clone=r},function(e,t){"use strict";function n(e){var t=e.indexOf("?")+1,n=t>0?e.slice(t).split("&"):[];return n.reduce(function(e,t){var n=t.replace(/\=.*/g,""),r=t.replace(n+"=","");return e[n]=o(r),e},{})}function r(e){return"string"==typeof e?e:Object.keys(e).reduce(function(t,n){var r=null===e[n]?"":e[n];return void 0!==r&&(t+=""+(t&&"&")+encodeURIComponent(n)+"="+encodeURIComponent(r)),t},"")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseQuery=n,t.toQueryString=r;var o=function(e){return"false"!==e&&("true"===e||decodeURIComponent(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),i=r(o),s="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;border:none;opacity:0;visibility:hidden;pointer-events:none;z-index:-9999";t["default"]=function(e,t){if(!e||!e.nodeName)throw new Error("非法的element: "+e);var n=document.createElement("iframe");return n.style.cssText=s,n.className=i["default"].name+"-resize-detector",e.appendChild(n),n.contentWindow.onresize=function(){return t(e)},{destroy:function(){n.contentWindow.onresize=void 0,n.parentNode&&n.parentNode.removeChild(n)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/i;t["default"]=function(e){if(!n.test(e))return e;var t=e.match(n).filter(function(e){return 2===e.length}).map(function(e){return parseInt(e,16)}),r=t.shift()/255;return"rgba("+t.join(",")+", "+r+")"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new r.Promise(function(r,i){var s=t||document.getElementsByTagName("head")[0],a=document.createElement("script");a.async=!0,n&&(a.crossOrigin="anonymous"),a.type="text/javascript",a.charset="utf-8",a.src=e,o("$script %s loading",e),a.onload=a.onreadystatechange=a.onerror=function(t){var n="load"===t.type||/^(loaded|complete)$/.test(a.readyState),c="error"===t.type;(n||c)&&(s.removeChild(a),n?r():i({type:t.type,request:e}),o("$script %s "+t.type,e))},s.appendChild(a)})};var r=n(23),o=n(21)("loader")},function(e,t){"use strict";function n(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!==("undefined"==typeof e?"undefined":o(e))||null===e||"object"!==("undefined"==typeof t?"undefined":o(t))||null===t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(!i.call(t,r[a])||!n(e[r[a]],t[r[a]]))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.prototype.hasOwnProperty;t["default"]=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return Math.random().toString(36).substr(2,9)}},function(e,t){"use strict";function n(e){return!!(e&&e._id&&e.nodes&&e.nodes.length)}function r(e){return!!(e&&e._id&&e.nodes&&e.nodes.length)}function o(e){return!!(e&&e._id&&e.nodeId&&e.nodeType)}function i(e){return!!(e&&e._id&&e.nodeId&&e.nodeType&&e.nodeData&&e.initedStyle)}Object.defineProperty(t,"__esModule",{value:!0}),t.validFlowMap=n,t.validFlowData=r,t.validFlowMapNode=o,t.validFlowDataNode=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=u(["\n  .cytronNode {\n    position: absolute;\n    display: block;\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    color: white;\n    pointer-events: auto;\n    overflow: hidden;\n  }\n  .cytronNode.flash {\n    -webkit-animation: 0.8s ease-in-out infinite flash alternate;\n            animation: 0.8s ease-in-out infinite flash alternate;\n  }\n  @-webkit-keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  @keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  .cytronNode.hover {\n    z-index: 101;\n  }\n"],["\n  .cytronNode {\n    position: absolute;\n    display: block;\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    color: white;\n    pointer-events: auto;\n    overflow: hidden;\n  }\n  .cytronNode.flash {\n    -webkit-animation: 0.8s ease-in-out infinite flash alternate;\n            animation: 0.8s ease-in-out infinite flash alternate;\n  }\n  @-webkit-keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  @keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  .cytronNode.hover {\n    z-index: 101;\n  }\n"]),p=n(30),h=n(25),v=o(h),g=n(34),y=r(g),m=n(17),b=n(26),_=n(16),w=o(_),T=n(21)("CytronNode"),O=w["default"].trackCategory,E=(0,v["default"])(d),I={enterTimeout:500,enterDelay:100,leaveTimeout:300,leaveDelay:0,enter:{opacity:0,transform:"translateY(-40px)"},active:{opacity:1,transform:"none"},leave:{opacity:0,transform:"translateY(-40px)"}};t["default"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{keepActive:""};return function(r){var o,u=(0,b.pure)(o=function(e){function t(e,o){s(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));i.triggerPortOut=function(e,t){if(!i.isEditing&&("string"==typeof e&&(e={id:e}),"SLOT_NONE"!==e.id)){if("SLOT_CLOSE"===e.id){var n=r.transitions||I,o=n.leave,s=n.leaveTimeout,a=void 0===s?0:s,c=n.leaveDelay,u=void 0===c?0:c,f=n.property,d=void 0===f?"opacity, transform":f,p=n.timingFunction,h=void 0===p?"ease":p;return i.setState({transitionStyle:(0,b.prefixer)(l({},o,{transitionProperty:d,transitionDelay:u+"ms",transitionDuration:a+"ms",transitionTimingFunction:h}))}),clearTimeout(i.closeTimer),void(i.closeTimer=setTimeout(i.doTriggerPortOut,a+u,e,t))}i.doTriggerPortOut(e,t)}},i.doTriggerPortOut=function(e,t){var n=i.context.actions,r=i.props.node;T("triggerPortOut",e,t,r),n&&n.scene.triggerNext(r,e,t).dispatchAsync()},i.doSetKeepActive=function(e){var t=i.context.actions,n=i.props.node;n.keepActive=e,T("setKeepActive",e),t&&t.scene.refresh("KEEP_ACTIVE").dispatchAsync()},i.triggerClose=function(e){e&&e.stopPropagation(),i.triggerPortOut("SLOT_CLOSE")},i.triggerCloseListener=function(e){if(i.isEditing)return function(){};var t=i.context.rootElement,n=function(t){t.target===i.base||i.base.contains(t.target)||(t.preventDefault(),e?e(t):i.triggerClose(t))};return i.removeCloseListener&&i.removeCloseListener(),t&&t.addEventListener("mousedown",n),i.removeCloseListener=function(){i.removeCloseListener=void 0,t&&t.removeEventListener("mousedown",n)},i.removeCloseListener},i.triggerVoteGet=function(e){if(i.isEditing)return Promise.resolve({});var t=i.context.ajax,n=i.props.node;return i.cache.vote?Promise.resolve(i.cache.vote):t.get("/flow/vote",{nodeId:e||n.nodeId,flowId:n._flowId}).then(function(e){var t=e.data;return i.cache.vote=l({},i.cache.vote,t),t})},i.triggerVoteCall=function(e,t){if(i.isEditing)return Promise.resolve({});if(!e&&!t)return console.warn("VoteCall 数据不完整 optionIds: "+e+", nodeId: "+t),Promise.resolve({});var n=i.context.ajax,r=i.props.node;return r.isInfo&&i.triggerTrackApiCall(O.infoNodeClick,{link:""}),n.post("/flow/vote",{optionId:e,nodeId:t||r.nodeId,flowId:r._flowId}).then(function(e){var t=e.data;return i.cache.vote=l({},i.cache.vote,t),t})},i.triggerLink=function(e){if(!i.isEditing){var t=e||{},n=t.url,r=t._id;n&&(i.props.node.isInfo&&i.triggerTrackApiCall(O.infoNodeLink,{link:r||""}),window.open(n,"_blank"))}},i.triggerLotteryGetStatus=function(e){if(i.isEditing)return Promise.resolve({passed:!0});var t=i.context.ajax,n=i.props.node;return e=e||{},t.get("/lottery/predraw",l({},e,{flowId:e.flowId||n._flowId,resourceId:e.resourceId||n._resourceId})).then(function(e){if(e.data)return e.data;throw e})},i.triggerDrawCall=function(e){if(i.isEditing)return Promise.resolve({});var t=i.context.ajax,n=i.props.node;return e=e||{},t.post("/lottery/draw",l({},e,{flowId:e.flowId||n._flowId,resourceId:e.resourceId||n._resourceId})).then(function(e){if(e.data)return e.data;throw e})},i.triggerTrackApiCall=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i.isEditing){var n=i.context.track,r=i.props.node,o=l({cat:e,tag:r._flowId,dg:r._resourceId},t);n(o)}},i.triggerMonitorCall=function(e,t){!i.isEditing&&Array.isArray(t)&&t.forEach(function(t){return t.type===e&&i.context.monitor(t)})},i.onNodeHover=function(){i.state.isHover||(i.setState({isHover:!0}),"onHover"===n.keepActive&&i.doSetKeepActive(!0))},i.onNodeRealease=function(){i.setState({isHover:!1}),"onHover"===n.keepActive&&(clearTimeout(i.activeTimer),i.activeTimer=setTimeout(function(){i.doSetKeepActive(!1)},500))},i.onNodeClicked=function(){var e=i.props.node;if(e.isTag&&i.triggerTrackApiCall(O.tagNodeClick),e.hasTime){var t=i.context.player.checkDot;t&&t(e._id)}var n=e.nodeData;i.triggerMonitorCall("click",n&&n.monitors)},i.startTrackStyleUpdater=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i.trackUpdateTimer||!t){i.stopTrackStyleUpdater();var n=i.props.node,r=n.tracks,o=n.nodeData,s=o&&o.autoTrack;if(r&&r.length&&s){var a=i.context.player.getTime()||0,c=r.reduce(function(e,t,n){var o=t.time;if(!(0,m.isEmpty)(e))return e;var i=r[n+1];return o<=a&&i&&a<=i.time&&y.assign(e,i,{idx:n}),e},{});if((0,m.isEmpty)(c)){var u=r[0];if(u&&u.time>a)return void i.setState({trackStyle:l({},u,{display:"none"})});var f=r[r.length-1];return f&&f.time<a?void i.setState({trackStyle:l({},f,{display:"none"})}):void i.setState({trackStyle:null})}var d=i.state.trackStyle,p=Math.abs(c.time-a),h=d?Math.abs(d.time-c.time):0,v=h>1e3||p>1e3,g=v?{opacity:0,transition:"none"}:{opacity:1,transition:"all "+p+"ms linear"},b=v?p-200:p,_=l({},c,g),w=!d||d.idx!==_.idx||d.transition!==_.transition;w&&i.setState({trackStyle:_}),e&&(i.trackUpdateTimer=setTimeout(i.startTrackStyleUpdater,b))}}},i.stopTrackStyleUpdater=function(){i.trackUpdateTimer&&(clearTimeout(i.trackUpdateTimer),i.trackUpdateTimer=void 0)},i.formatStyle=function(e){var t=["top","left","bottom","right","width","height"],n=["which","ratio"],r=Object.keys(e||{}).reduce(function(r,o){if(n.indexOf(o)!==-1)return r;var i=e[o];return t.indexOf(o)!==-1?r[o]=(0,m.isNumeric)(i)?100*i+"%":i:r[o]=i,r},{}),o=i.props.canDisplay,s=void 0===o||o;return y.assign(r,!s&&{display:"none"})};var c=r.transitions||I,u=c.enter,f=(0,b.prefixer)(l({},u));return i.isEditing=e.isEditing||o.isEditing,i.state={transitionStyle:f},i.cache={},"onInit"===n.keepActive&&i.doSetKeepActive(!0),i}return c(t,e),f(t,[{key:"getChildContext",value:function(){return{triggerTrackApiCall:this.triggerTrackApiCall,triggerMonitorCall:this.triggerMonitorCall,triggerLink:this.triggerLink,triggerVoteCall:this.triggerVoteCall,triggerVoteGet:this.triggerVoteGet,triggerDrawCall:this.triggerDrawCall,triggerLotteryGetStatus:this.triggerLotteryGetStatus,triggerClose:this.triggerClose,triggerCloseListener:this.triggerCloseListener,triggerPortOut:this.triggerPortOut,getLayout:this.getLayout,formatStyle:this.formatStyle,isPlaying:this.props.isPlaying,backdrop:this.props.backdrop,isEditing:this.isEditing}}},{key:"triggerComponentResize",value:function(){this.$node&&this.$node.componentDidResize&&(clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.$node.componentDidResize.bind(this.$node,!0)))}},{key:"componentDidMount",value:function(){var e=this;this.mountTimer=setTimeout(function(){var t=e.props.node;if(e.nodeMountTime=Date.now(),t.isTag){var n=t.initedStyle||{},o=n.left,i=n.top,s=e.context.getBaseDimension(),a=Math.round(o/s.width),c=Math.round(i/s.height);e.triggerTrackApiCall(O.tagNodeView,{x:a,y:c})}t.isInfo&&e.triggerTrackApiCall(O.infoNodeView),e.triggerMonitorCall("show",t.nodeData.monitors),e.base.addEventListener("click",e.onNodeClicked),e.base.addEventListener("mouseover",e.onNodeHover),e.base.addEventListener("mouseleave",e.onNodeRealease);var u=r.transitions||I,f=u.active,d=u.enterTimeout,p=void 0===d?0:d,h=u.enterDelay,v=void 0===h?0:h,g=u.property,y=void 0===g?"opacity, transform":g,m=u.timingFunction,_=void 0===m?"ease":m,w=(0,b.prefixer)(l({},f,{transitionProperty:y,transitionDelay:v+"ms",transitionDuration:p+"ms",transitionTimingFunction:_}));e.setState({transitionStyle:w}),e.startTrackStyleUpdater(e.props.isPlaying),e.triggerComponentResize()})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.mountTimer),clearTimeout(this.activeTimer),clearTimeout(this.resizeTimer),clearTimeout(this.closeTimer),clearTimeout(this.trackUpdateTimer);var e=Date.now()-this.nodeMountTime,t=this.props.node;this.base.removeEventListener("click",this.onNodeClicked),this.base.removeEventListener("mouseover",this.onNodeHover),this.base.removeEventListener("mouseleave",this.onNodeRealease),t.isInfo&&this.triggerTrackApiCall(O.infoNodeClose,{dr:e}),t.keepActive&&(t.keepActive=void 0),this.stopTrackStyleUpdater(),this.mountTimer=this.activeTimer=this.resizeTimer=this.closeTimer=this.trackUpdateTimer=void 0,this.removeCloseListener&&this.removeCloseListener()}},{key:"componentDidUpdate",value:function(e,t){!this.isEditing&&(0,m.shallowEqual)(e.dpi,this.props.dpi)&&(0,m.shallowEqual)(e.canDisplay,this.props.canDisplay)&&(0,m.shallowEqual)(t.trackStyle,this.state.trackStyle)||this.triggerComponentResize()}},{key:"componentWillReceiveProps",value:function(e){var t=e.trackTime,n=e.isPlaying,r=Math.abs(t-this.props.trackTime)>0,o=n&&!this.props.isPlaying;o||r?this.startTrackStyleUpdater(n,r):n||this.stopTrackStyleUpdater()}},{key:"render",value:function(e,t){var n,o=this,s=(0,b.cx)(E.cytronNode,(n={},i(n,E.flash,this.isEditing&&e.node.nodeData.autoHidden),i(n,E.hover,t.isHover),n)),a=e.trackStyle||t.trackStyle,c=a?l({left:a.left+a.width,top:a.top+a.height/2},"none"!==a.display&&{opacity:a.opacity,transition:a.transition||"none"}):{};return(0,p.h)(r,{ref:function(e){o.$node=e},className:s,style:l({},t.transitionStyle,this.formatStyle(l({},e.style,c))),trackStyle:a,node:e.node,nodes:e.nodes})}},{key:"getLayout",value:function(e){return e<480?"min":e>=720?"max":"mid"}}]),t}(p.Component))||o;return"defineCytronModule"in window&&defineCytronModule("module."+e+"."+t,function(n,r){return{nodeType:e,theme:t,component:u}}),u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);t["default"]=function(e,t){return function(n){var o=(0,r.pure)(n);return"defineCytronModule"in window&&defineCytronModule("plugin."+e,function(n,r){return{name:e,reducer:t.reducer,defaultState:t.defaultState,component:o}}),o}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=function(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o="undefined"==typeof r?"undefined":n(r);if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(classNames.apply(null,r));else if("object"===o)for(var i in r)({}).hasOwnProperty.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17);t["default"]=function(e){return e.prototype.shouldComponentUpdate=function(e,t){var n=r({},this.props,{children:void 0}),i=r({},e,{children:void 0}),s=this.props.children,a=e.children;return!(0,o.shallowEqual)(s,a)||!(0,o.shallowEqual)(n,i)||!(0,o.shallowEqual)(this.state,t)},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e={},t={};Object.defineProperty(window,"defineCytronModule",{value:function(n,r){delete t[n],e[n]=r}});var n=function(n,a){return new r.Promise(function(r){return e[n]?void r(e[n]):t[n]?(s("%c"+n+".js已经在加载中...","color: #d60303;"),void t[n].then(function(){r(e[n])})):void(t[n]=(0,o.script)(a).then(function(){r(e[n])}))}).then(function(e){return s("%c"+n+".js 加载完成...","color: #d60303;"),(0,i.initModuleCSS)(),e||function(){}})["catch"](function(e){return console.error("Load Module:"+n+" Error",e)})};return{cache:{defined:e,loading:t},load:n}};var r=n(23),o=n(17),i=n(25),s=n(21)("modules")},function(e,t){"use strict";function n(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(t=n[i],e.call(o,t,i,n))return t}function r(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(t=n[i],e.call(o,t,i,n))return i;return-1}function o(e,t){return n.call(e,t)}function i(e,t){return r.call(e,t)}function s(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,r=arguments[1],o=r>>0,i=o<0?Math.max(n+o,0):Math.min(o,n),s=arguments[2],a=void 0===s?n:s>>0,c=a<0?Math.max(n+a,0):Math.min(a,n);i<c;)t[i]=e,i++;return t}function a(e,t){return s.call(e,t)}function c(e){var t=Object(this),n=parseInt(t.length)||0;if(0===n)return!1;var r,o=parseInt(arguments[1])||0;o>=0?r=o:(r=n+o,r<0&&(r=0));for(var i;r<n;){if(i=t[r],e===i||e!==e&&i!==i)return!0;r++}return!1}function u(e,t){return c.call(e,t)}function l(e,t){return e.indexOf(t)!==-1}Object.defineProperty(t,"__esModule",{value:!0}),t.find=o,t.findIndex=i,t.fill=a,t.includes=u,t.contains=l,Array.prototype.includes||(Array.prototype.includes=c),Array.prototype.find||(Array.prototype.find=n),Array.prototype.fill||(Array.prototype.fill=s)},function(e,t,n){"use strict";var r=n(41);window.btoa=window.btoa||r.btoa,window.atob=window.atob||r.atob},function(e,t){"use strict";function n(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.assign=n,"function"!=typeof Object.assign&&(Object.assign=n)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),i=r(o),s=i["default"].debug?"cytron-platform.debug":"cytron-platform.prod";t["default"]={get:function(e){var t=s+"."+e,n=window.localStorage.getItem(t);return n?JSON.parse(n):n},set:function(e,t){var n=s+"."+e;return window.localStorage.setItem(n,JSON.stringify(t))},remove:function(e){var t=s+"."+e;return window.localStorage.removeItem(t)},clear:function(){window.localStorage.clear()}}},function(e,t){"use strict";
e.exports=window.__CYTRON_LIB__.browser},,,,function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(30),a=o(s),c=n(16),u=o(c),l=n(68),f=o(l),d=n(21),p=o(d),h=n(43),v=r(h),g=n(25),y=r(g),m=n(17),b=r(m),_=n(26),w=r(_),T=n(34),O=r(T);if(!window.__CYTRON_LIB__){var E=b.parseQuery(location.search),I=void 0!==E.cyDebug?E.cyDebug:u["default"].debug;"local"===u["default"].version&&p["default"].enable(),Object.defineProperty(window,"__CYTRON_LIB__",{value:{config:i({},u["default"],I&&E,{debug:I}),preact:a["default"],debug:p["default"],csjs:y,helper:b,jsxKit:w,polyfills:O,browser:v,storage:f["default"],modules:n(64)["default"](),instances:{}}})}t["default"]=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=u["default"].version,r=u["default"].date;console.log("%c🚀 "+e+"@"+n+" update on "+new Date(r).toLocaleString(),"color:#888;")}}},,function(e,t,n){e.exports={"default":n(77),__esModule:!0}},function(e,t,n){e.exports={"default":n(78),__esModule:!0}},function(e,t,n){n(88),e.exports=n(22).Object.assign},function(e,t,n){n(89),e.exports=n(22).Object.keys},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(79);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(80);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){var r=n(85),o=n(37),i=n(84);e.exports=n(36)(function(){var e=Object.assign,t={},n={},r=Symbol(),o="abcdefghijklmnopqrst";return t[r]=7,o.split("").forEach(function(e){n[e]=e}),7!=e({},t)[r]||Object.keys(e({},n)).join("")!=o})?function(e,t){for(var n=o(e),s=arguments,a=s.length,c=1,u=r.getKeys,l=r.getSymbols,f=r.isEnum;a>c;)for(var d,p=i(s[c++]),h=l?u(p).concat(l(p)):u(p),v=h.length,g=0;v>g;)f.call(p,d=h[g++])&&(n[d]=p[d]);return n}:Object.assign},function(e,t,n){var r=n(35),o=n(22),i=n(36);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",s)}},function(e,t,n){var r=n(35);r(r.S+r.F,"Object",{assign:n(86)})},function(e,t,n){var r=n(37);n(87)("keys",function(e){return function(t){return e(r(t))}})},function(e,t,n){"use strict";e.exports=n(95)},function(e,t,n){"use strict";e.exports=n(97)},function(e,t,n){"use strict";var r=n(90);e.exports=r,e.exports.csjs=r,e.exports.getCss=n(91)},function(e,t){"use strict";var n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";e.exports=function(e){if(0===e)return"0";for(var t="";e>0;)t=n[e%62]+t,e=Math.floor(e/62);return t}},function(e,t,n){"use strict";function r(e){function t(e){return Object.keys(e).forEach(function(o){n[o]||(n[o]=!0,r.push(o),t(e[o]))})}var n={},r=[];return t(e),r}var o=n(29).makeComposition;e.exports=function(e,t,n){var i=Object.keys(t).reduce(function(e,n){var r=t[n];return e[r]=o([n],[r],!0),e},{}),s=Object.keys(e).reduce(function(t,i){var s=e[i],a=n[i],c=a?r(a):[],u=[i].concat(c),l=u.map(function(t){return e[t]?e[t]:t});return t[s]=o(u,l),t},i);return s}},function(e,t,n){"use strict";function r(e){return a(e)?e.selector:e}function o(e,t){return e.map(function(e,n){return n!==t.length?e+t[n]:e}).join("")}function i(e,t){return Object.keys(e).reduce(function(n,r){return t[r]||(n[r]=e[r]),n},{})}var s=n(96),a=n(29).isComposition,c=n(94),u=n(100),l=n(38);e.exports=function(e){for(var t=Array(arguments.length-1),n=1;n<arguments.length;n++)t[n-1]=arguments[n];var f=o(e,t.map(r)),d=t.reduce(function(e,t){return a(t)&&t.classNames.forEach(function(n,r){e[n]=t.unscoped[r]}),e},{}),p=u(f,d),h=s(p.css),v=i(p.classes,d),g=i(p.keyframes,d),y=h.compositions,m=c(v,g,y);return Object.defineProperty(m,l,{enumerable:!1,configurable:!1,writeable:!1,value:h.css})}},function(e,t,n){"use strict";function r(e){return e.split(",").map(o)}function o(e){var t=e.trim();return"."===t[0]?t.substr(1):t}var i=(n(29).makeComposition,/\.([^\s]+)(\s+)(extends\s+)(\.[^{]+)/g);e.exports=function(e){function t(e,t){var n=o(t[1]),i=t[3],s=t[4],a=t.index+t[1].length+t[2].length,c=i.length+s.length;e.css=e.css.slice(0,a)+" "+e.css.slice(a+c+1);var u=r(s);return u.forEach(function(t){e.compositions[n]||(e.compositions[n]={}),e.compositions[t]||(e.compositions[t]={}),e.compositions[n][t]=e.compositions[t]}),e}for(var n,s=[];n=i.exec(e);)s.unshift(n);return s.reduce(t,{css:e,compositions:{}})}},function(e,t,n){"use strict";var r=n(38);e.exports=function(e){return e[r]}},function(e,t){"use strict";e.exports=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}},function(e,t,n){"use strict";var r=n(93),o=n(98);e.exports=function(e){var t=r(o(e));return function(e){return e+"_"+t}}},function(e,t,n){"use strict";function r(e,t){function n(e,n){function o(o,i,s){var a=t[s]?s:r(s);return e[n][a]=s,i+a}var i=s[n];return{css:e.css.replace(i,o),keyframes:e.keyframes,classes:e.classes}}var r=i(e),s={classes:u,keyframes:l},a=Object.keys(s).reduce(n,{css:e,keyframes:{},classes:{}});return o(a)}function o(e){var t=Object.keys(e.keyframes).reduce(function(t,n){return t[e.keyframes[n]]=n,t},{}),n=Object.keys(t);if(n.length){var r="((?:animation|animation-name)\\s*:[^};]*)("+n.join("|")+")([;\\s])"+c,o=new RegExp(r,"g"),i=e.css.replace(o,function(e,n,r,o){return n+t[r]+o});return{css:i,keyframes:e.keyframes,classes:e.classes}}return e}var i=n(99),s=/(\.)(?!\d)([^\s\.,{\[>+~#:)]*)(?![^{]*})/.source,a=/(@\S*keyframes\s*)([^{\s]*)/.source,c=/(?!(?:[^*\/]|\*[^\/]|\/[^*])*\*+\/)/.source,u=new RegExp(s+c,"g"),l=new RegExp(a+c,"g");e.exports=r},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function a(){var e;try{e=t.storage.debug}catch(n){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(102),t.log=i,t.formatArgs=o,t.save=s,t.load=a,t.useColors=r,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,n){function r(){return t.colors[l++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,i=n-(u||n);e.diff=i,e.prev=u,e.curr=n,u=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(e,i),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));var c=o.log||t.log||console.log.bind(console);c.apply(e,s)}n.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=c,t.disable=s,t.enable=i,t.enabled=a,t.humanize=n(103),t.names=[],t.skips=[],t.formatters={};var u,l=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,u,"day")||i(e,c,"hour")||i(e,a,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,l=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?o(e):r(e)}},function(e,t,n){!function(t,r){e.exports=r(n(30))}(this,function(e){function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e,t){var n=e.attributes&&e.attributes.key;return null===n||void 0===n?t:n}function r(e,t){var n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=function(n){e.refs[t]=n})}function o(e){for(var t={},r=0;r<e.length;r++){var o=n(e[r],r.toString(36));t[o]=e[r]}return t}function i(e,t){e=e||{},t=t||{};var n=function(n){return t.hasOwnProperty(n)?t[n]:e[n]},r={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var s={};for(var a in t){if(r.hasOwnProperty(a))for(var c=0;c<r[a].length;c++){var u=r[a][c];s[r[a][c]]=n(u)}s[a]=n(a)}for(var l=0;l<o.length;l++)s[o[l]]=n(o[l]);return s}var s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(e){return e},f=function(n){function l(){var e,t,r;s(this,l);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t=u(this,n.call.apply(n,[this].concat(a))),t.refs={},t.state={children:o(t.props.children||[])},t.performEnter=function(e){t.currentlyTransitioningKeys[e]=!0;var n=t.refs[e];n.componentWillEnter?n.componentWillEnter(t._handleDoneEntering.bind(t,e)):t._handleDoneEntering(e)},t.performLeave=function(e){t.currentlyTransitioningKeys[e]=!0;var n=t.refs[e];n.componentWillLeave?n.componentWillLeave(t._handleDoneLeaving.bind(t,e)):t._handleDoneLeaving(e)},r=e,u(t,r)}return a(l,n),l.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},l.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},l.prototype.componentWillReceiveProps=function(e){var t=o(e.children||[]),n=this.state.children;this.setState({children:i(n,t)});var r=void 0;for(r in t)if(t.hasOwnProperty(r)){var s=n&&n.hasOwnProperty(r);!t[r]||s||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n)if(n.hasOwnProperty(r)){var a=t&&t.hasOwnProperty(r);!n[r]||a||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},l.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},l.prototype.performAppear=function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},l.prototype._handleDoneAppearing=function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var n=o(this.props.children||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)},l.prototype._handleDoneEntering=function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=o(this.props.children||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)},l.prototype._handleDoneLeaving=function(e){var n=this.refs[e];n.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var r=o(this.props.children||[]);if(r&&r.hasOwnProperty(e))this.performEnter(e);else{var i=t({},this.state.children);delete i[e],this.setState({children:i})}},l.prototype.render=function(t,n){var o=t.childFactory,i=(t.transitionLeave,t.transitionName,t.transitionAppear,t.transitionEnter,t.transitionLeaveTimeout,t.transitionEnterTimeout,t.transitionAppearTimeout,t.component),s=c(t,["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"]),a=n.children,u=[];for(var l in a)if(a.hasOwnProperty(l)){var f=a[l];if(f){var d=r(this,l),p=e.cloneElement(o(f),{ref:d,key:l});u.push(p)}}return e.h(i,s,u)},l}(e.Component);return f.defaultProps={component:"span",childFactory:l},f})},function(e,t){function n(){f&&u&&(f=!1,u.length?l=u.concat(l):d=-1,l.length&&r())}function r(){if(!f){var e=s(n);f=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,f=!1,a(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var u,l=[],f=!1,d=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new o(e,t)),1!==l.length||f||s(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t){},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.modules},,,,,function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.host;return/^([\w-]+:)?\/\/([^\/]+)/.test(e),RegExp.$2!==t}function o(e){var t=new XMLHttpRequest;if(!r(e)||"withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest){var n=/^https?/;if(window.location.href.match(n)[0]!==e.match(n)[0])throw new Error("XDomainRequest: requests must be targeted to the same scheme as the hosting page.");return new XDomainRequest}throw new Error("Browser does not support cross-origin requests")}function i(e){return"string"==typeof e?e:Object.keys(e).reduce(function(t,n){var r=null===e[n]?"":e[n];return void 0!==r&&(t+=""+(t&&"&")+encodeURIComponent(n)+"="+encodeURIComponent(r)),t},"")}function s(e,t){return t=i(t||""),t?(e+"&"+t).replace(/[&?]{1,2}/,"?"):e}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new g.Promise(function(n,i){var a=["GET","POST","PUT","PATCH","DELETE"],c=(t.method||"GET").toUpperCase();if(a.indexOf(c)===-1)throw new Error("Invalid options.method "+c);var u=s(e,t.query),l=o(e);l.open(c,u,!0),l.onload=function(){var r="status"in l,o=!r||l.status>=200&&l.status<300,s={request:v({url:e},t),status:l.status,statusText:l.statusText};try{s.data=JSON.parse(l.responseText)}catch(a){s.data=l.responseText}o?n(s):i(s)},l.ontimeout=function(){i({message:"请求超时"})},l.onerror=function(){i({message:"请求错误"})},l.timeout=t.timeout||0;var f=t.body||"",d=v({Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded"},t.headers,!r(e)&&{"X-Requested-With":"XHRHttpRequest"}),p="object"===h(t.body)?JSON.stringify(f):f;return l.setRequestHeader&&Object.keys(d).forEach(function(e){l.setRequestHeader(e,d[e])}),l.send(p)})}function c(e,t,n){return a(e,v({method:"GET",query:t},n))}function u(e,t,n){return a(e,v({method:"POST",body:t},n))}function l(e,t,n){return a(e,v({method:"PUT",body:t},n))}function f(e,t,n){return a(e,v({method:"PATCH",body:t},n))}function d(e,t,n){return a(e,v({method:"DELETE",body:t},n))}function p(e,t){var n="cytronJsonpHandle_"+(0,y.uid)(),r=s(e,v({callback:n},t)),o=void 0;return window[n]=function(e){o=e},(0,y.script)(r,null,!1).then(function(){return delete window[n],{data:o,request:{url:e,query:t}}})}Object.defineProperty(t,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.isCrossDomain=r,t.mkRequest=o,t.toQueryString=i,t.appendQuery=s,t.$ajax=a,t.$get=c,t.$post=u,t.$put=l,t.$patch=f,t.$delete=d,t.$jsonp=p;var g=n(23),y=n(7);n(4)("request")},,,function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.toast=t.scene=void 0;var o=n(141),i=r(o),s=n(142),a=r(s);t.scene=i,t.toast=a},,,,,,,,,,,,,,,,function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.instances},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=c(["\n  .toastWrapper {\n    display: block;\n    text-align: center;\n    pointer-events: auto;\n  }\n  .toastRoot {\n    color: white;\n    display: inline-block;\n    cursor: pointer;\n    width: auto;\n    padding: 8px 10px;\n    margin: 5px;\n    line-height: 20px;\n    text-align: left;\n    margin: 5px;\n    font-size: 13px;\n    font-weight: normal;\n    border-radius: 3px;\n    box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.3);\n    -webkit-animation: toast-enter ","ms ease-in;\n            animation: toast-enter ","ms ease-in;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .enter {\n    -webkit-animation: none;\n            animation: none;\n  }\n  .leave {\n    -webkit-animation: toast-leave ","ms ease-out;\n            animation: toast-leave ","ms ease-out;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .success {\n    background-color: #71b570;\n  }\n  .warn {\n    background-color: #f89406;\n  }\n  .error {\n    background-color: #f26969;\n  }\n  .info {\n    background-color: #7986cb;\n  }\n  @-webkit-keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @-webkit-keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n  @keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n"],["\n  .toastWrapper {\n    display: block;\n    text-align: center;\n    pointer-events: auto;\n  }\n  .toastRoot {\n    color: white;\n    display: inline-block;\n    cursor: pointer;\n    width: auto;\n    padding: 8px 10px;\n    margin: 5px;\n    line-height: 20px;\n    text-align: left;\n    margin: 5px;\n    font-size: 13px;\n    font-weight: normal;\n    border-radius: 3px;\n    box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.3);\n    -webkit-animation: toast-enter ","ms ease-in;\n            animation: toast-enter ","ms ease-in;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .enter {\n    -webkit-animation: none;\n            animation: none;\n  }\n  .leave {\n    -webkit-animation: toast-leave ","ms ease-out;\n            animation: toast-leave ","ms ease-out;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .success {\n    background-color: #71b570;\n  }\n  .warn {\n    background-color: #f89406;\n  }\n  .error {\n    background-color: #f26969;\n  }\n  .info {\n    background-color: #7986cb;\n  }\n  @-webkit-keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @-webkit-keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n  @keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n"]),d=n(1),p=n(2),h=r(p),v=n(7),g=n(3),y={timeout:300},m=(0,h["default"])(f,y.timeout,y.timeout,y.timeout,y.timeout),b=(0,g.pure)(u=function(e){function t(e,n){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.onRemoveToast=function(){clearTimeout(r.timeoutId),r.setState({leave:!0}),setTimeout(function(){var e=r.props.id;r.context.actions.toast.remove(e).dispatch()},y.timeout)},r.state={},r}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.setState({enter:!0})},y.timeout);var t=this.props.timeout;(0,v.isNumeric)(t)&&(this.timeoutId=setTimeout(this.onRemoveToast,t))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(e,t){var n,r=e.type,i=e.message,s=(0,g.cx)(m.toastRoot,m[r],(n={},o(n,m.leave,t.leave),o(n,m.enter,!t.leave&&t.enter),n));return(0,d.h)("div",{className:m.toastWrapper},(0,d.h)("div",{className:s,onClick:this.onRemoveToast},i))}}]),t}(d.Component))||u;t["default"]=b},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerMethods={triggerLink:function(e){console.warn("context.triggerLink 还未被实现")},triggerMonitorCall:function(e,t){console.warn("context.triggerMonitorCall 还未被实现")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){var n=I[e.rootId];n.rootInstance=(0,h.render)((0,h.h)(n.Root,{key:e.rootId,plugins:t,state:e.runner.getStore().getState()}),e.$container,n.rootInstance)}function u(e,t){I[e.rootId]={Root:E(e)},c(e,t)}function l(e){var t=I[e.rootId];if(t){(0,h.render)((0,h.h)("span",{id:e.rootId}),e.$container,t.rootInstance);var n=document.getElementById(e.rootId);setTimeout(function(){n.parentElement&&n.parentElement.removeChild(n),I[e.rootId]=void 0})}}Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponent=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=a(["\n  .nodes {}\n  .plugins {}\n  .toasts {\n    position: absolute;\n    left: 50%;\n    top: 10px;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    z-index: 9999999;\n    text-align: center;\n  }\n"],["\n  .nodes {}\n  .plugins {}\n  .toasts {\n    position: absolute;\n    left: 50%;\n    top: 10px;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    z-index: 9999999;\n    text-align: center;\n  }\n"]);t.refresh=c,t.start=u,t.destroy=l;var h=n(1),v=n(2),g=r(v),y=n(7),m=n(8),b=r(m),_=n(136),w=r(_),T=n(139),O=(n(4)("renderer"),(0,g["default"])(p)),E=t.RootComponent=function(e){return function(t){function n(t){o(this,n);var r=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.onActiveHiddenNodes=function(){var t=function(){clearTimeout(r.autoHiddenTimer),r.autoHiddenTimer=setTimeout(function(){r.autoHiddenTimer=void 0,e.actions.scene.hideHidden().dispatch()},3e3)};r.autoHiddenTimer||e.actions.scene.showHidden().dispatch(),t()},r.onResize=(0,y.debounce)(300)(function(){r.setupDimension(),r.forceUpdate()}),r.setupDimension=function(){e.$container&&e.session.setDPI(r.getBaseDimension())},r.getBaseDimension=function(){return e.$container.getBoundingClientRect()},r.state={},r}return s(n,t),d(n,[{key:"getChildContext",value:function(){return f({config:e.config,player:e.player,runner:e.runner,actions:e.actions,session:e.session,flowManager:e.flowManager,mqttClient:e.mqttClient,rootElement:e.$container,rootId:e.rootId,ajax:e.api.ajax,track:e.api.track,monitor:e.api.monitor,getBaseDimension:this.getBaseDimension},T.triggerMethods)}},{key:"componentDidMount",value:function(){e.$container&&(this.setupDimension(),this.detector=(0,y.resizeDetector)(e.$container,this.onResize),e.$container.addEventListener("mousemove",this.onActiveHiddenNodes))}},{key:"componentDidUpdate",value:function(){var t=e.player.getLayer?e.player.getLayer():null;if(t){var n=this.props.state.scene.hookState,r=n.backdrop||n.layerMode;t.style.display=r?"none":""}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoHiddenTimer),this.detector.destroy(),e.$container&&e.$container.removeEventListener("mousemove",this.onActiveHiddenNodes)}},{key:"renderNodes",value:function(t,n){var r=t.scene,o=r.hookState||{},i=e.player.opts||{},s=e.runner.getDisplayingNodes(),a=s.reduce(function(e,t){var n=t._state.hookState,r=n.backdrop,o=n.layerMode,i=r||o,s=!e||t.activeTime>e.activeTime;return i&&s?t:e},null),c=e.player.isPlaying(),u=function(e){if(r.activePlugin)return!0;if(e.isHidden)return!0;var t=o.layerMode||i.pauseLayerEnable&&!c;if(t&&e._state.hideInLayerMode)return!0;var n=e._state.hookState,s=n.backdrop,u=n.layerMode;return!(!s&&!u)&&e!==a},l=s.filter(function(e){return!e.nodeData.autoHidden||r.isShowHidden}).map(function(t){var i=e.runner.getModule(t._nodeKey);return(0,h.h)(i,{key:t._nodeKey+"_"+t._id,style:t.initedStyle,isPlaying:c,trackTime:(0,y.isEmpty)(t.tracks)?null:r.currentTime,backdrop:o.backdrop||o.layerMode,canDisplay:!u(t),dpi:n,node:t})}),f=e.rootId+"-nodes";return(0,h.h)("div",{className:O.nodes,key:f},l)}},{key:"renderPlugins",value:function(t,n){var r=this,o=this.props.plugins||{},i=t.scene,s=i.activePlugin,a=i.hookState,c=a||{},u=c.layerMode,l=c.backdrop,d=e.runner.setActivePlugin,p=Object.keys(o).map(function(i){var a=o[i],c=s&&s!==i;if(!a)return null;var p=e.rootId+"-plugin_"+i;return r[p]||(r[p]={onActivate:d.bind(r,i),onInactivate:d.bind(r,null)}),(0,h.h)(o[i],f({key:p},r[p],{state:t[i],dpi:n,disabled:c&&"inactive"||u&&"layerMode"||l&&"backdrop"
}))}),v=e.rootId+"-plugins";return(0,h.h)("div",{className:O.plugins,key:v},p)}},{key:"renderToasts",value:function(t){var n=t.toasts||{},r=Object.keys(n).length>0,o=!r&&{display:"none"},i=e.rootId+"-toasts";return(0,h.h)("div",{key:i,style:o,className:O.toasts},Object.keys(n).map(function(e){var t=n[e];return(0,h.h)(w["default"],f({key:"toast_"+e},t))}))}},{key:"render",value:function(t){var n=t.state,r=e.session.getDPI();return(0,h.h)("div",{id:e.rootId,className:b["default"].name},this.renderNodes(n,r),this.renderPlugins(n,r),this.renderToasts(n,r))}}]),n}(h.Component)},I={Root:void 0,rootInstance:void 0}},function(e,t){"use strict";function n(){return{type:"PLAY",payload:null}}function r(){return{type:"PAUSE",payload:null}}function o(e){return{type:"UPDATE_TIME",meta:{ignoreLog:!0},payload:Math.max(0,e)}}function i(e){return o(e)}function s(){return{type:"STOP",payload:null}}function a(){return{meta:{ignoreLog:!0},type:"SHOW_HIDDEN"}}function c(){return{meta:{ignoreLog:!0},type:"HIDE_HIDDEN"}}function u(e,t,n){return{type:"TRIGGER_NEXT",payload:{currentNode:e,slot:t,portData:n}}}function l(e){return{type:"SET_ACTIVE_PLUGIN",payload:e}}function f(e){return{type:"REFRESH",payload:e}}function d(){return{type:"DESTROY",payload:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.play=n,t.pause=r,t.updateTime=o,t.setTime=i,t.stop=s,t.showHidden=a,t.hideHidden=c,t.triggerNext=u,t.setActivePlugin=l,t.refresh=f,t.destroy=d},function(e,t){"use strict";function n(e){return{type:"SHOW_TOAST",payload:{type:"error",option:e},meta:{ignoreLog:!0}}}function r(e){return{type:"SHOW_TOAST",payload:{type:"warn",option:e},meta:{ignoreLog:!0}}}function o(e){return{type:"SHOW_TOAST",payload:{type:"success",option:e},meta:{ignoreLog:!0}}}function i(e){return{type:"SHOW_TOAST",payload:{type:"info",option:e},meta:{ignoreLog:!0}}}function s(e){return{type:"REMOVE_TOAST",payload:{id:e},meta:{ignoreLog:!0}}}Object.defineProperty(t,"__esModule",{value:!0}),t.error=n,t.warn=r,t.success=o,t.info=i,t.remove=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=t.onActive,r=t.onInactive,o={};return{hasAds:function(){return Object.keys(o).length>0},registerAds:function(e){e&&e.length&&(e&&e.forEach(function(e,t){o[t]={query:e.query,inTime:e.startTime,outTime:e.endTime}}),c("registerAds",o))},getNewActiveAds:function(t,s){var u=function(e){e.activeTime=void 0,e.detail&&(r(e.detail),e.detail=void 0)},l=Date.now(),f=(new Date).toLocaleDateString(),d=Object.keys(o).map(function(e){return o[e]}).filter(function(t){var r=(0,i.isNumeric)(t.inTime)&&s>=t.inTime-100,o=(0,i.isNumeric)(t.outTime)&&s>t.outTime,d=!r||o;return d?(t.activeTime&&u(t),!1):(t.activeTime||(t.activeTime=l,e.api.getAdDetail(t.query).then(function(e){if(t.activeTime){var r=e._id,o=e.frequency,i=o&&1===o.fType?o.times:null,s=a["default"].get("ad-frequency")||{};s.date!==f&&(s.counts={},s.date=f);var u=s.counts[r]||0;(!i||u<i)&&(s.counts[r]=u+1,t.detail=e,n(t.detail)),c("AdDetail Loaded",e,r,o,u,i),a["default"].set("ad-frequency",s)}})),!0)});return d}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(7),s=n(9),a=r(s),c=n(4)("ad")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){function n(e){return(0,i.validFlowMap)(e)?(e.nodes.forEach(function(t){t._nodeId=e._id+"_"+t.nodeId,t._nodeKey=t.nodeType+"."+(t.themeName||"default")}),void(p[e._id]=e)):void console.warn("格式不合法的FlowMap",e)}function r(e){if(e&&e.web&&(0!==e.global||e.videoId===d)&&s(e)){if(!(0,i.validFlowData)(e))return void console.warn("格式不合法的FlowData",e);var t=p[e.flowMapId];if(!(0,i.validFlowMap)(t))return void console.error("flows:"+e._id+" 的 flowMapId:"+e.flowMapId+" 未能匹配到合法的flowMap");e.nodes.forEach(function(n,r){var s=a.find(t.nodes,function(e){return e.nodeId===n.nodeId});(0,i.assert)(s,"flow:"+e._id+" node: "+n._id+" 未能在flowMap中匹配到nodeId为 "+n.nodeId+" 的节点"),n._mongoId=n._id,n._id=e._id+"_"+r,n._nodeId=e.flowMapId+"_"+n.nodeId,n._flowId=e._id,n._flowMapId=e.flowMapId,n._resourceId=e.resourceId,n._nodeKey=s._nodeKey,n.tracks&&(n.tracks=n.tracks.sort(function(e,t){return e.time-t.time})),n._state={hideInLayerMode:s.hideInLayerMode,lifeLimit:s.lifeLimit,hookState:s.hookState||{},flowMapNode:s};var c=a.find(s.portOut,function(e){return"LIVE_TIME"===e.portType});if(c)n.liveTime=o(n,"portOutPayload",c.portId);else{var u=a.find(s.portIn,function(e){return"TIME"===e.portType}),l=a.find(s.portOut,function(e){return"TIME"===e.portType});u&&(n.inTime=o(n,"portInPayload",u.portId)),l&&(n.outTime=o(n,"portOutPayload",l.portId))}n.hasTime=(0,i.isNumeric)(n.inTime)||(0,i.isNumeric)(n.liveTime),n.isInfo=!n.hasTime||n.nodeType===t.primaryNodeType,n.isTag=n.hasTime&&!n.isInfo,v[n._id]=n}),h[e._id]=e}}function o(e,t,n){return e[t]?e[t][n]:(console.error("数据有误：node."+t+" 缺失, _id: "+e._id+", flowId: "+e._flowId),null)}function s(e){var n=e.showInfos;if(!n||n.length<1)return!0;var r=Date.now()-t.getOffsetTime(),o=a.find(n,function(e){if(!e)return!1;var t=new Date(e.beginTime).getTime()||0,n=new Date(e.endTime).getTime()||1/0;return r>=t&&r<n});return o}function u(e){var t=e._state,n=t.lifeCount=(t.lifeCount||0)+1,r=t.lifeLimit;return!r||n<r}function l(){return!(0,i.isEmpty)(v)}function f(){return Object.keys(v).map(function(e){return v[e]})}var d=e.videoId,p={},h={},v={};return{getNextNode:function(e,t){var n=t.id,r=e._state,o=r.flowMapNode,i=a.find(o.portOut,function(e){return e.slotId===n})||{},s="triggerCount_"+n,c=r[s]=(r[s]||0)+1,l=i.triggerLimit;if(l&&c>=l&&(r.lifeLimit=1,e.isDirty=!0),!i.toPort)return e.isDirty=!0,e.fromNode&&(e.fromNode.isHidden=!1,e.fromNode.isDirty=!t.isHidden),null;var f=p[e._flowMapId],d=a.find(f.nodes,function(e){return!!e.portIn&&a.find(e.portIn,function(e){return e.portId===i.toPort&&e.portType===i.portType})}),v=h[e._flowId],g=a.find(v.nodes,function(e){return e._nodeId===d._nodeId});return u(g)?(t.isHidden?e.isHidden=!0:e.isDirty=!0,g.fromNode=e,g.keepActive=!0,g.isDirty=!1,g):null},getFlowMap:function(e){var t=p[e];return t},hasNodes:l,getNodes:f,addFlowMap:n,addFlow:r,removeFlow:function(e){var t=h[e];return t?(t.nodes.forEach(function(e){var t=e._id,n=v[t];delete v[n._id]}),void delete h[e]):void c("删除失败，没有找到对应的flowId: "+e)},getFlow:function(e){return h[e]},getNewActiveNodes:function(e,t){var n=function(e){e.activeTime=void 0,e.liveTime=void 0,e.keepActive=!1},r=Date.now(),o=f().filter(function(e){var o=(0,i.isNumeric)(e.liveTime),s=(0,i.isNumeric)(e.activeTime),a=(0,i.isNumeric)(e.inTime)&&t<e.inTime,c=(0,i.isNumeric)(e.inTime)&&t>=e.inTime,l=(0,i.isNumeric)(e.outTime)&&t>e.outTime,f=!o&&(!c||l),d=o&&s&&r-e.activeTime>=e.liveTime,p=e.isDirty,h=e.keepActive;if(p)return a&&(e.isDirty=!1),n(e),!1;if(!h&&f)return n(e),!1;if(!h&&d)return n(e),!1;if(!s){if(!u(e))return n(e),!1;e.activeTime=r}return!0});return o}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(7),s=n(10),a=r(s),c=n(4)("flow")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return Object.keys(R).reduce(function(r,o){var i=n.payload,a=n.type,c=(R[o]||{})[a],u=t[o]||D[o],l=(0,f.isFunction)(c)&&c(u,i,e,n);return r[o]=l?s({},l):u,r},D)}function n(){k("=====> runner bootstrap"),L.dispatch(_.scene.refresh("TIME_FLOW")),E.start(e,N),L.subscribe(function(){E.refresh(e,N)})}function r(){k("=====> runner destroy"),L.dispatch(_.scene.destroy()),L.destroy(),E.destroy(e)}function o(){return L}function i(){var e=L.getState().scene.activeNodes,t=void 0===e?[]:e;return t.filter(function(e){return!e.isDirty})}function a(e){L.dispatchAsync(_.scene.setActivePlugin(e))}function u(t){return new I.Promise(function(n,r){if(!t||!t.length)return n();var o=t.map(function(t){var n=c["default"].publicUrl+t+".js";return(0,d.load)(t,n).then(function(t){return t(e.$container,e.config)})});return I.Promise.all(o).then(function(e){e.forEach(function(e){var t=e.name,n=e.reducer,r=e.defaultState,o=e.component;k("register plugin:",t);var i="plugin_"+t;R[i]=n,D[i]=r,N[i]=o}),n()},r)}).then(function(t){return e.actions.scene.refresh().dispatch(),t})}function p(t){return new I.Promise(function(n,r){if(!t||!t.length)return n();var o=t.reduce(function(t,n){return e.flowManager.addFlowMap(n),n.nodes.forEach(function(e){var n=v(e._nodeKey)||e.ignore,r="module."+e._nodeKey;n||t.indexOf(r)!==-1||t.push(r)}),t},[]);if(!o.length)return n();var i=o.map(function(t){var n=c["default"].publicUrl+t+".js";return(0,d.load)(t,n).then(function(t){return t(e.$container,e.config)})});return I.Promise.all(i).then(function(e){e.forEach(function(e){var t=e.nodeType,n=e.theme,r=e.component,o=t+"."+n;j[o]=r}),n()},r)}).then(function(t){return e.actions.scene.refresh().dispatch(),t})}function v(e){return j[e]}function y(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TIME_FLOW";t&&t.length&&(t.forEach(e.flowManager.addFlow),e.actions.scene.refresh(n).dispatchAsync())}function b(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TIME_FLOW";t&&t.length&&(t.forEach(function(t){var n=(0,f.isPlainObject)(t)?t._id:t;n&&e.flowManager.removeFlow(n)}),e.actions.scene.refresh(n).dispatchAsync())}function w(t){return t?e.flowManager.getFlow(t):null}function O(){L.dispatch(_.scene.play())}function M(){L.dispatch(_.scene.pause())}function S(){L.dispatch(_.scene.stop())}function A(e){L.dispatch(_.scene.setTime(e))}function C(){if(e.rootId){var t=document.getElementById(e.rootId);if(t){var n={zIndex:2147483647},r={maxHeight:"none",maxWidth:"none",height:"100%",width:"100%",margin:0,top:0,left:0,right:0,bottom:0};x.root=Object.keys(n).reduce(function(e,n){return e[n]=t.style[n],e},{}),x.container=Object.keys(r).reduce(function(t,n){return t[n]=e.$container.style[n],t},{}),l.assign(t.style,n),l.assign(e.$container.style,r);var o=(0,f.getFullscreenChangeEvent)();document.removeEventListener(o,P),document.addEventListener(o,P)}}}function P(){if(e.rootId&&!(0,f.isFullscreen)()){var t=document.getElementById(e.rootId);t&&(document.removeEventListener((0,f.getFullscreenChangeEvent)(),P),l.assign(t.style,x.root),l.assign(e.$container.style,x.container),x.root=x.container=null)}}var x={container:null,root:null},j={},N={},D={scene:{currentTime:0,activeNodes:[],activeAds:[],hookState:{backdrop:!1,layerMode:!1,playerPause:!1,playerBlur:!1},isShowHidden:!1,isPlaying:!1,activePlugin:null},toasts:{}},R={scene:g["default"],toasts:m["default"]},L=(0,h["default"])(t,T);return{bootstrap:n,destroy:r,getStore:o,getDisplayingNodes:i,registerPlugins:u,setActivePlugin:a,registerModules:p,getModule:v,registerFlows:y,removeFlows:b,getFlow:w,onPlay:O,onPause:M,onStop:S,onSetTime:A,onFullscreen:C,onExitFullscreen:P}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=i;var a=n(8),c=o(a),u=n(10),l=r(u),f=n(7),d=n(107),p=n(151),h=o(p),v=n(149),g=o(v),y=n(150),m=o(y),b=n(115),_=r(b),w=n(146),T=r(w),O=n(140),E=r(O),I=n(23),k=n(4)("runner")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(148);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(147);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var o=n(8),i=r(o),s=n(7),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return"color: "+e+"; font-weight: "+t+";"},c=t.logger=function(e){return function(t){return function(n){if(!n)return null;if(!i["default"].debug||n.meta&&n.meta.ignoreLog)return t(n);var r=(new Date).toTimeString().split(" ")[0];(0,s.groupStartLog)(n.type);var o=e.getState();console.log("%c prev state ",a("#9E9E9E",800),(0,s.clone)(o)),console.log("%c action("+r+") ",a("#03A9F4"),n);var c=t(n),u=e.getState();return console.log("%c next state ",a("#4CAF50",800),(0,s.clone)(u)),(0,s.groupEndLog)(n.type),c}}};t["default"]=c},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.readyStatePromise=void 0;var o=n(10),i=r(o);t.readyStatePromise=function(e){return function(e){return function(t){function n(e,n){var r=i.assign({},t,{ready:e},n);return delete r.promise,r}return t.promise?(e(n(!1)),t.promise.then(function(t){return e(n(!0,{result:t}))},function(t){return e(n(!0,{error:t}))})):e(t)}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){e.__videoTimer&&(_("resetVideoTimer...",e.__videoTimer),clearInterval(e.__videoTimer),e.__videoTimer=null)}function c(e,t){var n=t.flowManager&&t.flowManager.hasNodes(),r=t.adManager&&t.adManager.hasAds(),o="normal"===t.config.mode&&t.player&&t.player.isPlaying()&&(n||r),i=t.__videoTimer;if(!o)return void a(t);if(!i){var s=1e3/t.config.fps;t.__videoTimer=setInterval(function(){if(!t.player)return void a(t);var n=t.player.getTime();e.currentTime!==n&&t.actions.scene.updateTime(n).dispatch()},s),_("startVideoTimer...",t.__videoTimer)}}function u(e,t){l(t);var n=Date.now(),r=e.activeNodes.filter(function(e){return!e.keepActive&&(0,v.isNumeric)(e.liveTime)&&(0,v.isNumeric)(e.activeTime)}).map(function(e){return Math.max(e.activeTime+e.liveTime-n,0)});r.length&&(t.__liveTimer=setTimeout(function(){t.actions.scene.refresh("LIVE_FLOW").dispatchAsync()},Math.min.apply(Math,s(r).concat([2147483647]))))}function l(e){e.__liveTimer&&(clearInterval(e.__liveTimer),e.__liveTimer=null)}function f(e,t){if(t.player){e.activeAds=t.adManager.getNewActiveAds(e.activeAds,e.currentTime),e.activeNodes=t.flowManager.getNewActiveNodes(e.activeNodes,e.currentTime);var n=e.hookState,r=e.activeNodes.filter(function(e){return!e.isDirty}).reduce(function(e,t){var n=t._state.hookState||{},r=Object.keys(n).reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},{});return h.assign(e,r)},{backdrop:!1,layerMode:!1,playerPause:!1,playerBlur:!1});r.playerPause!==n.playerPause&&(r.playerPause?e.isPlaying&&(e.isPaused=!0,setTimeout(t.player.pause)):e.isPaused&&(e.isPaused=void 0,setTimeout(t.player.play))),r.playerBlur!==n.playerBlur&&(r.playerBlur?t.player.blur(22):t.player.blur(0)),e.hookState=r}}Object.defineProperty(t,"__esModule",{value:!0});var d,p=n(10),h=o(p),v=n(7),g=n(8),y=r(g),m=n(9),b=r(m),_=n(4)("rd.scene"),w=y["default"].trackCategory,T=w.videoPlay,O=w.videoPause,E=w.videoDrag,I=w.nodeJump,k=(d={},i(d,"PLAY",function(e,t,n){return c(e,n),e.isPlaying||n.api.track({cat:T}),e.isPlaying=!0,e}),i(d,"PAUSE",function(e,t,n){return a(n),e.isPlaying&&n.api.track({cat:O}),e.isPlaying=!1,e}),i(d,"UPDATE_TIME",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2];if(!n.player)return e;var r=n.player.getTotalTime();if(r>1e3&&t>=r)return _("reach the end of timeline,should switch to next scenes or stop"),a(n),e.currentTime=r,e.isPlaying=!1,e;var o=t-e.currentTime;return Math.abs(o)>3e3&&n.api.track({cat:E,x:Math.round(e.currentTime),y:Math.round(t)}),e.currentTime=t,f(e,n),e}),i(d,"REFRESH",function(e,t,n){if(!n.player)return e;if(c(e,n),!t)return e;if(f(e,n),u(e,n),"TIME_FLOW"===t&&n.player.insertDots){var r=n.flowManager.getNodes().filter(function(e){return(0,v.isNumeric)(e.inTime)}).map(function(e){return{id:e._id,intro:e.nodeData.title||"",time:e.inTime}});n.player.insertDots(r)}return e}),i(d,"STOP",function(e,t,n){return a(n),e.currentTime=0,e.isPlaying=!1,e}),i(d,"DESTROY",function(e,t,n){return a(n),l(n),e}),i(d,"WAIT",function(e,t,n){return a(n),e}),i(d,"SHOW_HIDDEN",function(e){return e.isShowHidden=!0,e}),i(d,"HIDE_HIDDEN",function(e){return e.isShowHidden=!1,e}),i(d,"TRIGGER_NEXT",function(e,t,n){var r=t.currentNode,o=t.slot,i=t.portData,s=n.flowManager.getNextNode(r,o);if(s){var a=b["default"].get("ports")||{};s.portInData||(s.portInData=a[s._id]||[]),void 0!==i&&(s.portInData=s.portInData.filter(function(e){return e!==i}).concat([i]),a[s._id]=s.portInData,b["default"].set("ports",a)),n.api.track({cat:I,x:r._mongoId,y:s._mongoId})}return f(e,n),e}),i(d,"SET_ACTIVE_PLUGIN",function(e,t){return e.activePlugin=t,e}),d);t["default"]=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t["default"]={SHOW_TOAST:function(e,t){var n=t.type,o=t.option,i="string"==typeof o?{message:o}:o,s=i.id,a=void 0===s?(0,r.uid)():s,c=i.message,u=i.timeout,l=void 0===u?3e3:u;return e[a]={id:a,type:n,message:c,timeout:l},e},REMOVE_TOAST:function(e,t){var n=t.id;return delete e[n],e}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){function n(e){(0,i.assert)("function"==typeof e,"subscribe: listener must be an function"),c.push(e);var t=!0;return function(){if(t){t=!1;var n=c.indexOf(e);c.splice(n,1)}}}function o(){c.length=0,l=!0}function a(t){if(l)return t;(0,i.assert)((0,i.isPlainObject)(t),"action must be an plain object, use custom middleware for async actions"),(0,i.assert)("undefined"!=typeof t.type,'action must have an "type" property, have you misspelled a constant?'),(0,i.assert)(!f,"reducer may not dispatch actions");try{f=!0,u=e(u,t)}catch(n){throw n}finally{f=!1}return c.slice().forEach(function(e){return e(u)}),t}(0,i.assert)("function"==typeof e,"reducer must be an function");var c=[],u={},l=!1,f=!1;a({type:s.INIT});var d={getState:function(){return u},dispatch:a},p=function(e){return"function"==typeof e.getValue?e.getValue():e},h=Object.keys(t).map(function(e){return t[e](d)}),v=function(e){l||(e=p(e),i.compose.apply(void 0,r(h))(a)(e))},g=function(e,t){return setTimeout(function(){return v(e)},t)},y=function m(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return"function"==typeof r?t[n]=function(){var e=r.apply(void 0,arguments);return{getValue:function(){return e},dispatch:function(){return v(e)},dispatchAsync:function(t){return g(e,t)}}}:t[n]=m(r),t},{})};return{getState:d.getState,dispatch:v,dispatchAsync:g,subscribe:n,destroy:o,bindActions:y}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,t["default"]=o;var i=n(7),s=t.ActionTypes={INIT:"@cytron-platform/INIT"}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.isTrackQuery=t.mkReqUrl=t.encode=t.errorMessages=void 0;var i=n(10),s=r(i),a=function(e,t){var n=s.find(Object.keys(e),function(e){return t.indexOf(e)!==-1});return e[n]};t.errorMessages=function(e,t){if(t=t||"",403===e){var n=o({},"no power ak","请确保您的appkey正确且被加入白名单");return a(n,t)||"您的操作没有权限哦~"}return 401===e?"请先登录您的账号~":404===e?"抱歉，您访问的接口找不到了~":t||"抱歉，服务器发生未知错误"},t.encode=function(e){return window.btoa(unescape(encodeURIComponent(e)))},t.mkReqUrl=function(e,t){var n=/^(\/\/)|^(http:)|^(https:)/.test(e);return n?e:t+e},t.isTrackQuery=function(e){for(var t=["cat","s","dg","tag"],n=0;n<t.length;n++)if(!e.hasOwnProperty(t[n]))return!1;return!0}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(8),u=o(c),l=n(7),f=n(112),d=r(f),p=n(10),h=r(p),v=n(152),g=n(4)("api"),y={},m=function b(e,t){var n=this;i(this,b);var r={cyApiAddress:e.apiAddress||u["default"].apiAddress,meApiAddress:e.meAddress||e.meApiAddress||u["default"].meApiAddress,vaApiAddress:e.vaAddress||e.vaApiAddress||u["default"].vaApiAddress,authApiAddress:e.authAddress||e.authApiAddress||u["default"].authApiAddress,adApiAddress:e.adAddress||e.adApiAddress||u["default"].adApiAddress,referer:e.referer},o=function(e){e=e||{};var n=e.cat||{},r=e.s||u["default"].serviceType;return a({cat:"",s:"",ver:1,n:Math.floor(1e8*Math.random()),v:t.getVideoId()||"",ch:t.getChannel()||"",proj:t.getProject()||"",br:t.getBrand()||"",rs:t.getDPI(),a:t.getAppkey(),c:t.getIdentity()||"",lang:navigator.language||navigator.userLanguage},e,{dr:e.dr||0,y:e.y||0,x:e.x||0,cat:n.value||"",s:r.value||""})},c=function(e,t){var n=(0,l.parseQuery)(e),r=o(t),i=(0,v.isTrackQuery)(n)?Object.keys(n).reduce(function(e,t){return e[t]=n[t]||r[t],e},{}):n,s=e.replace(/\?.*/g,"");return d.appendQuery(s,i)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){if("local"===u["default"].version&&u["default"].debug)return void g("doTrack debug "+t,(0,l.parseQuery)(e));var n=new Image(1,1);n.onload=n.onerror=function(){g("doTrack done "+t+"("+e+")")},n.src=e}},p=function(e){var n=t.getToken(),o=e||{Appkey:(0,v.encode)(t.getAppkey()),Authorization:n?"Bearer "+n:"","Auth-App-Store":t.getAppStoreToken()||"",Identity:t.getIdentity(),"Content-Type":"application/json",Referer2:r.referrer||location.href};return{headers:o}},m=["jsonp","get","post","delete"].reduce(function(e,t){return e[t]=function(e,n,o){return d["$"+t]((0,v.mkReqUrl)(e,r.cyApiAddress),n,p(o)).then(function(e){var t=e&&e.data,n=t&&t.status||200,r=t&&(t.data||t.msg)||t;return 200!==n?Promise.reject({message:(0,v.errorMessages)(n,t.msg),status:n,data:r}):h.assign({},e,{data:r})})["catch"](function(e){var t=e.status,n=e.message,r=e.data;return Promise.reject({message:(0,v.errorMessages)(t,n),data:r,status:t})})},e},{});this.setup=function(){var e=r.meApiAddress+"/jsonp/getUid",n=r.authApiAddress+"/jsonp/getCookie.js";return Promise.all([y[e]||(y[e]=m.jsonp(e).then(function(e){return e.data})),m.jsonp(n).then(function(e){return e.data||{}})]).then(function(e){var n=s(e,2),o=n[0],i=n[1];return t.setIdentity(o),i.token?(t.setToken(i.token),m.get(r.cyApiAddress+"/user/currentUser").then(function(e){var n=e.data;t.setPower(n.power),t.setIp(n.ip),t.setRefer(n.refer),t.setUserAgent(n.userAgent),t.setRole(n.role),t.setUsername(n.username),t.setEmail(n.email)})):i})["catch"](function(){t.setToken(""),Promise.resolve({})})},this.getVideoConfigs=function(e,r){var o={local:1,title:r,url:(0,v.encode)(e)},i=Date.now();return m.post("/video",o).then(function(e){var n=e.data;return t.setVideoId(n.videoId),t.setAppStoreToken(n.appStoreToken),t.setChannel(n.channel),t.setBrand(n.brand),t.setProject(n.project),t.setCategories(n.categories),t.setProjectType(n.type),t.setOffsetTime(i-n.currentTime),a({},n.config,{videoDataUrl:n.videoDataUrl})})["catch"](function(e){return n.logError("GET api/video 接口获取Video++视频信息失败: "+e.message),console.error("getVideoConfigs...",e),Promise.resolve({})})},this.getVideoData=function(e){if(!t.isReady())return n.logError("getVideoData 接口调用失败: session 数据缺少 videoId"),Promise.resolve({});var r=(0,l.isEmpty)(e),o=r?{v:t.getVideoId()}:null,i=(e||"/flow").replace(/(https:|http:)/g,"");return m.get(i,o,!r&&{}).then(function(e){return e.data})["catch"](function(e){return n.logError("getVideoData 接口调用失败: ",e),Promise.resolve({})})},this.getGlobalData=function(){if(!t.isReady())return console.warn("getGlobalData 接口调用失败: session 数据缺少 videoId"),Promise.resolve({});var e={project:t.getProject(),channel:t.getChannel()};return m.get("/flow/global",e).then(function(e){return e.data})["catch"](function(){return Promise.resolve({})})},this.getAdSummary=function(){if(!t.isReady())return console.warn("getAdSummary 接口调用失败: session 数据缺少 videoId"),Promise.resolve({});if(g("getAdSummary...",r),!r.adApiAddress)return Promise.resolve([]);var e=a({},o(),{videoId:t.getVideoId(),projectId:t.getProject(),channelId:t.getChannel(),brandId:t.getBrand(),clientId:t.getClientId(),categoryId:t.getCategories().join(",")});return m.get(r.adApiAddress+"/server/summary",e).then(function(e){return f(c(e.data.track),"AdSummary"),e.data.ads})["catch"](function(){return Promise.resolve([])})},this.getAdDetail=function(e){return m.get(c(e)).then(function(e){var t=e.data,n=t.ad,r=t.flowMaps,o=t.flows,i=t.track;return f(c(i),"AdDetail"),{_id:n._id,frequency:n.frequency,title:n.title,flowMaps:r,flows:o}})["catch"](function(){return Promise.resolve({})})},this.mqttNotify=function(){if(!t.isReady())return console.warn("mqttNotify 接口调用失败: session 数据缺少 videoId"),Promise.resolve({});var e={videoId:t.getVideoId(),project:t.getProject(),clientId:t.getClientId(),channel:t.getChannel()};return m.get("/mqtt",e).then(function(e){return e.data})},this.monitor=function(e){var t=e.name,n=e.type,r=e.url;f(c(r),"monitor:"+n+":"+t)},this.track=function(e){if(t.getDPI()){var n=e&&e.cat||{},i=e&&e.s||u["default"].serviceType,s=i.alias+":"+n.alias+"("+i.value+":"+n.value+")";if(!t.getProject()||!t.getVideoId())return void console.warn("track va.gif:"+s+" 数据缺失");var a=o(e),c=d.appendQuery(r.vaApiAddress+"/track/va.gif",a);f(c,"va.gif:"+s)}},this.trackError=function(e){g("track 视频解析失败");var t=o({custom:e});f(d.appendQuery(r.vaApiAddress+"/track/error",t),"error: video error")},this.logError=function(e){return"local"===u["default"].version&&u["default"].debug?void console.error("Cytron Log Error ",e):void m.get("/log","string"==typeof e?{message:e}:e)},this.ajax=m};t["default"]=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){window.__CYTRON_INITED__&&!function(){var e=window.__CYTRON_INITED__,t=e.parent,n=e.config;delete window.__CYTRON_INITED__;var r=new Iva(t,n);window.__CYTRON_DESTROY__=function(){return r.destroy()}}(),window.__IVA_HOLDER__&&(Object.keys(window.__IVA_HOLDER__).forEach(function(e){var t=window.__IVA_HOLDER__[e],n=t.parent,r=t.config,o=t.instance,i=void 0===o?{}:o,s=new Iva(n,r);i.destroy=function(){s.destroy()}}),delete window.__IVA_HOLDER__)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(7),s=n(8),a=r(s),c=n(156),u=r(c),l=n(257),f=n(4)("mqtt"),d=a["default"].useSwfMqtt||"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Trident")>-1||navigator.userAgent.indexOf("Edge/")>-1,p=function h(e){var t=this;o(this,h);var n=e.parent,r=e.clientId,s=e.videoId,c=e.channelId,p=e.projectId,v="beijing-mqtt.ons.aliyun.com",g=["cytron/p2p","cytron/site","cytron/"+s,"cytron/channels/"+c,"cytron/project/"+p],y=[],m={},b={},_=10,w="",T=0,O=null,E=null,I=e.onConnect,k=d?new u["default"](n,v,r):new l.MQTT.Client(v,80,r),M={useSSL:0===location.href.indexOf("https"),userName:"CSwtMsBf6OXprzjS",password:"+NzaZi/0UHxnB7mNWe/wbT1gl6Q=",onSuccess:function(){return"disconnect"===w?void k.disconnect():(f("onConnected",k.isConnected()),g.forEach(k.subscribe),y.forEach(k.subscribe),w="connected",void((0,i.isFunction)(I)&&I()))}};k.onConnectionLost=function(e){clearTimeout(E),clearTimeout(O),"disconnect"!==w&&(f("onConnectionLost"),T<=_?O=setTimeout(function(){return t.connect(!0)},1e3):f("Reconnect Failed",e))},k.onMessageArrived=function(e){try{!function(){var t=JSON.parse(e.payloadString),n=t.msg,r=t.type;f("onMessageArrived",r,n),b[r]=n,Object.keys(m[r]||{}).forEach(function(e){var t=m[r][e];(0,i.isFunction)(t)&&t(n)})}()}catch(t){f(t)}},a["default"].debug&&(this.__mqtt=k),this.connect=function(e){f("Connect...",w),w="connecting",clearTimeout(O),clearTimeout(E),k.isConnected()||(e?(T+=1,f("Reconnecting... "+T+" time",M)):(T=0,f("Connecting...",M)),d&&k.disconnect(),k.connect(M))},this.disconnect=function(){f("Disconnect...",w);var e=w;w="disconnect","connected"===e&&(g.forEach(k.unsubscribe),y.forEach(k.unsubscribe),k.disconnect()),y.length=0},this.subscribe=function(e){f("Subscribe",e),y.push(e),"connected"===w&&k.subscribe(e)},this.unsubscribe=function(e){k.unsubscribe(e)},this.setMsgListener=function(e,t){m[e]||(m[e]={}),m[e][t]=t;var n=b[e];n&&(0,i.isFunction)(t)&&t(n)},this.getState=function(){return w},this.getMessages=function(){return(0,i.copy)(b)},this.clearMsgListener=function(e,t){m[e]||(m[e]={}),delete m[e][t]};try{this.connect()}catch(S){throw console.error("MQTT连接失败",S),S}};t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(8),s=r(i),a=(n(4)("swf-mqtt"),s["default"].assertsUrl+"/mqtt_v0314.swf"),c='\n  <object\n    id="cytron-mqtt-swf"\n    data="'+a+'"\n    type="application/x-shockwave-flash"\n    style="width:0; height:0;"\n  >\n    <param name="allowScriptAccess" value="always" />\n    <param name="allowInsecureDomain" value="*" />\n    <param name="allowDomain" value="*" />\n  </object>\n',u=function(e){var t=document.createElement("div");return t.innerHTML=c,t.id="cytron-mqtt-wrapper",e.appendChild(t),document.getElementById("cytron-mqtt-swf")},l=function f(e,t,n){var r=this;o(this,f);var i=u(e),s=null,a=!1;this.subscribe=function(e){"function"==typeof i.subscribe&&i.subscribe(e)},this.unsubscribe=function(e){"function"==typeof i.unsubscribe&&i.unsubscribe(e)},this.connect=function(o){return clearTimeout(s),s=null,i||(i=u(e)),i.connect?(i.connect({username:o.userName,password:o.password,clientid:n,host:t,port:1883,tname:"videojj"}),window.onMqttConnected=function(){a=!0,o.onSuccess&&o.onSuccess()},window.onMqttMessageArrived=function(e){var t=e.match(/(\w|\/|@)+:/)[0];r.onMessageArrived&&r.onMessageArrived({destinationName:t.substr(0,t.length-1),payloadString:e.replace(t,"").replace("\n","<br>")})},void(window.onMqttConnectionLost=function(e){a=!1,r.onConnectionLost&&r.onConnectionLost(e)})):void(s=setTimeout(function(){return r.connect(o)},300))},this.disconnect=function(){if(clearTimeout(s),a=!1,s=null,delete window.onMqttConnected,delete window.onMqttMessageArrived,delete window.onMqttConnectionLost,i){i.disconnect&&i.disconnect();var e=i.parentElement;e.parentElement.removeChild(e),i=null}},this.isConnected=function(){return!s&&a}};t["default"]=l},function(e,t,n){
"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(10),s=r(i),a=(n(4)("session"),function c(e,t){o(this,c);var n={};this.update=function(e){return s.assign(n,e)},this.setToken=function(e){return n.token=e},this.setAppkey=function(e){return n.appkey=e},this.setVideoId=function(e){return n.videoId=e},this.setPower=function(e){return n.power=e},this.setAppStoreToken=function(e){return n.appStoreToken=e},this.setProject=function(e){return n.project=e},this.setChannel=function(e){return n.channel=e},this.setBrand=function(e){return n.brand=e},this.setCategories=function(e){return n.categories=e},this.setIp=function(e){return n.ip=e},this.setUserAgent=function(e){return n.userAgent=e},this.setUsername=function(e){return n.username=e},this.setEmail=function(e){return n.email=e},this.setRefer=function(e){return n.refer=e},this.setDPI=function(e){var t=e.height,r=e.width;return n.dpi=Math.round(r)+"x"+Math.round(t)},this.setIdentity=function(e){return n.identity=e},this.setRole=function(e){return n.role=e},this.setProjectType=function(e){return n.projectType=e},this.setOffsetTime=function(e){return n.offsetTime=e},this.getToken=function(){return n.token},this.getVideoId=function(){return n.videoId},this.getAppkey=function(){return n.appkey},this.getIdentity=function(){return n.identity||""},this.getClientId=function(){return"CID_H5@@@"+n.identity},this.getAppStoreToken=function(){return n.appStoreToken},this.getProject=function(){return n.project},this.getChannel=function(){return n.channel},this.getBrand=function(){return n.brand},this.getCategories=function(){return n.categories||[]},this.getIp=function(){return n.ip},this.getUserAgent=function(){return n.userAgent},this.getUserInfo=function(){return n.username?(n.username||"")+" <"+(n.email||"")+">":""},this.getRefer=function(){return n.refer},this.getDPI=function(){return n.dpi},this.getRole=function(){return n.role},this.getProjectType=function(){return n.projectType},this.getOffsetTime=function(){return n.offsetTime||0},this.isReady=function(){return n.videoId&&n.project},this.isEditable=function(){var e=n.power||"000000";return"1"===e.charAt(5)||"1"===e.charAt(1)},this.setAppkey(e.appkey),this.setDPI(t.getBoundingClientRect())});t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.playerUrl||p["default"].publicUrl+"player."+(e.player||"venvy")+".js";return(0,h.load)("player",t)}function i(e,t){return e.setup().then(function(){return y("=====> Loading Video Configs..."),e.getVideoConfigs(t.video,t.title)}).then(function(e){return y("=====> Video Configs Loaded..."),e})}function s(e){var t=Date.now();window.onfocus=function(){e.track({cat:p["default"].trackCategory.videoFocus,dr:Date.now()-t}),t=Date.now()},window.onblur=function(){e.track({cat:p["default"].trackCategory.videoBlur,dr:Date.now()-t}),t=Date.now()},window.onbeforeunload=function(){e.track({cat:p["default"].trackCategory.videoClose})}}function a(){window.onfocus=window.onblur=window.onbeforeunload=void 0}function c(e,t){var n={};return(0,v.debounce)(5e3,!0)(function(r){var o=r&&r.filename||"";if(y("%c onError","color: red",r),o.indexOf("cytron")!==-1){var i=r&&r.message||"",s=r&&r.lineno||NaN,a=r&&r.colno||NaN,c=o+"("+s+":"+a+") "+i;if(!n[c]){n[c]=i;var u=r&&r.error&&r.error.stack||"";e.logError({message:i,filename:o,lineno:s,colno:a,stack:u.split("\n").slice(0,3).join(", "),sdkVersion:p["default"].version,sdkDesc:"SDK/H5@"+p["default"].version+" update on "+new Date(p["default"].date).toLocaleString(),dpi:t.getDPI(),video:t.getVideoId(),appkey:t.getAppkey(),ip:t.getIp()})}}})}function u(e){var t=(0,v.getElement)(e);return(0,v.setRelateveStyle)(t),(0,v.assert)(t,e+"容器未找到"),t}function l(e){var t=g.notSupport||e.disabled||p["default"].disabled;return(0,v.assert)(e.appkey&&e.video,"缺少config必要字段，请确保您的config包含appkey, video"),f({},e,{fps:p["default"].fps,title:(e.title||document.title||"").substring(0,100),mode:t?"":g.isMobile?"mobile":"normal",disabled:t})}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.loadPlayerModule=o,t.loadVideoConfig=i,t.startWindowTrack=s,t.stopWindowTrack=a,t.getErrorReport=c,t.getContainer=u,t.getConfig=l;var d=n(8),p=r(d),h=n(107),v=n(7),g=n(69),y=n(4)("core.starter")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=window.Paho;"undefined"==typeof r&&(r={}),r.MQTT=function(e){function t(e,t){var n=t,o=e[t],i=o>>4,a=o&=15;t+=1;var c,u=0,f=1;do{if(t==e.length)return[null,n];c=e[t++],u+=(127&c)*f,f*=128}while(0!=(128&c));var p=t+u;if(p>e.length)return[null,n];var h=new _(i);switch(i){case d.CONNACK:var v=e[t++];1&v&&(h.sessionPresent=!0),h.returnCode=e[t++];break;case d.PUBLISH:var g=a>>1&3,y=s(e,t);t+=2;var m=l(e,t,y);t+=y,g>0&&(h.messageIdentifier=s(e,t),t+=2);var b=new r.MQTT.Message(e.subarray(t,p));1==(1&a)&&(b.retained=!0),8==(8&a)&&(b.duplicate=!0),b.qos=g,b.destinationName=m,h.payloadMessage=b;break;case d.PUBACK:case d.PUBREC:case d.PUBREL:case d.PUBCOMP:case d.UNSUBACK:h.messageIdentifier=s(e,t);break;case d.SUBACK:h.messageIdentifier=s(e,t),t+=2,h.returnCode=e.subarray(t,p)}return[h,p]}function o(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function i(e,t,n,r){return r=o(t,n,r),u(e,n,r),r+t}function s(e,t){return 256*e[t]+e[t+1]}function a(e){var t=new Array(1),n=0;do{var r=e%128;e>>=7,e>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}function c(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function u(e,t,n){for(var r=n,o=0;o<e.length;o++){var i=e.charCodeAt(o);if(55296<=i&&i<=56319){var s=e.charCodeAt(++o);if(isNaN(s))throw new Error(y(v.MALFORMED_UNICODE,[i,s]));i=(i-55296<<10)+(s-56320)+65536}i<=127?t[r++]=i:i<=2047?(t[r++]=i>>6&31|192,t[r++]=63&i|128):i<=65535?(t[r++]=i>>12&15|224,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>18&7|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t}function l(e,t,n){for(var r,o="",i=t;i<t+n;){var s=e[i++];if(s<128)r=s;else{var a=e[i++]-128;if(a<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)r=64*(s-192)+a;else{var c=e[i++]-128;if(c<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16)]));if(s<240)r=4096*(s-224)+64*a+c;else{var u=e[i++]-128;if(u<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));if(!(s<248))throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));r=262144*(s-240)+4096*a+64*c+u}}}r>65535&&(r-=65536,o+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),o+=String.fromCharCode(r)}return o}var f="@VERSION@",d={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},p=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r)){var o="Unknown property, "+r+". Valid properties are:";for(var r in t)t.hasOwnProperty(r)&&(o=o+" "+r);throw new Error(o)}if(n(e[r])!==t[r])throw new Error(y(v.INVALID_TYPE,[n(e[r]),r]))}},h=function(e,t){return function(){return e.apply(t,arguments)}},v={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},g={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},y=function(e,t){var n=e.text;if(t)for(var r,o,i=0;i<t.length;i++)if(r="{"+i+"}",o=n.indexOf(r),o>0){var s=n.substring(0,o),a=n.substring(o+r.length);n=s+t[i]+a}return n},m=[0,6,77,81,73,115,100,112,3],b=[0,4,77,81,84,84,4],_=function(e,t){this.type=e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};_.prototype.encode=function(){var e=(15&this.type)<<4,t=0,n=new Array,r=0;switch(void 0!=this.messageIdentifier&&(t+=2),this.type){case d.CONNECT:switch(this.mqttVersion){case 3:t+=m.length+3;break;case 4:t+=b.length+3}if(t+=c(this.clientId)+2,void 0!=this.willMessage){t+=c(this.willMessage.destinationName)+2;var s=this.willMessage.payloadBytes;s instanceof Uint8Array||(s=new Uint8Array(l)),t+=s.byteLength+2}void 0!=this.userName&&(t+=c(this.userName)+2),void 0!=this.password&&(t+=c(this.password)+2);break;case d.SUBSCRIBE:e|=2;for(var u=0;u<this.topics.length;u++)n[u]=c(this.topics[u]),t+=n[u]+2;t+=this.requestedQos.length;break;case d.UNSUBSCRIBE:e|=2;for(var u=0;u<this.topics.length;u++)n[u]=c(this.topics[u]),t+=n[u]+2;break;case d.PUBREL:e|=2;break;case d.PUBLISH:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),r=c(this.payloadMessage.destinationName),t+=r+2;var l=this.payloadMessage.payloadBytes;t+=l.byteLength,l instanceof ArrayBuffer?l=new Uint8Array(l):l instanceof Uint8Array||(l=new Uint8Array(l.buffer));break;case d.DISCONNECT:}var f=a(t),p=f.length+1,h=new ArrayBuffer(t+p),v=new Uint8Array(h);if(v[0]=e,v.set(f,1),this.type==d.PUBLISH)p=i(this.payloadMessage.destinationName,r,v,p);else if(this.type==d.CONNECT){switch(this.mqttVersion){case 3:v.set(m,p),p+=m.length;break;case 4:v.set(b,p),p+=b.length}var g=0;this.cleanSession&&(g=2),void 0!=this.willMessage&&(g|=4,g|=this.willMessage.qos<<3,this.willMessage.retained&&(g|=32)),void 0!=this.userName&&(g|=128),void 0!=this.password&&(g|=64),v[p++]=g,p=o(this.keepAliveInterval,v,p)}switch(void 0!=this.messageIdentifier&&(p=o(this.messageIdentifier,v,p)),this.type){case d.CONNECT:p=i(this.clientId,c(this.clientId),v,p),void 0!=this.willMessage&&(p=i(this.willMessage.destinationName,c(this.willMessage.destinationName),v,p),p=o(s.byteLength,v,p),v.set(s,p),p+=s.byteLength),void 0!=this.userName&&(p=i(this.userName,c(this.userName),v,p)),void 0!=this.password&&(p=i(this.password,c(this.password),v,p));break;case d.PUBLISH:v.set(l,p);break;case d.SUBSCRIBE:for(var u=0;u<this.topics.length;u++)p=i(this.topics[u],n[u],v,p),v[p++]=this.requestedQos[u];break;case d.UNSUBSCRIBE:for(var u=0;u<this.topics.length;u++)p=i(this.topics[u],n[u],v,p)}return h};var w=function(e,t,n){this._client=e,this._window=t,this._keepAliveInterval=1e3*n,this.isReset=!1;var r=new _(d.PINGREQ).encode(),o=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(r),this.timeout=this._window.setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(v.PING_TIMEOUT.code,y(v.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},T=function(e,t,n,r,o){this._window=t,n||(n=30);var i=function(e,t,n){return function(){return e.apply(t,n)}};this.timeout=setTimeout(i(r,e,o),1e3*n),this.cancel=function(){this._window.clearTimeout(this.timeout)}},O=function(t,n,r,o,i){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(y(v.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in e&&null!==e.localStorage))throw new Error(y(v.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(y(v.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",t,n,r,o,i),this.host=n,this.port=r,this.path=o,this.uri=t,this.clientId=i,this._localKey=n+":"+r+("/mqtt"!=o?":"+o:"")+":"+i+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0;for(var s in localStorage)0!=s.indexOf("Sent:"+this._localKey)&&0!=s.indexOf("Received:"+this._localKey)||this.restore(s)};O.prototype.host,O.prototype.port,O.prototype.path,O.prototype.uri,O.prototype.clientId,O.prototype.socket,O.prototype.connected=!1,O.prototype.maxMessageIdentifier=65536,O.prototype.connectOptions,O.prototype.hostIndex,O.prototype.onConnectionLost,O.prototype.onMessageDelivered,O.prototype.onMessageArrived,O.prototype.traceFunction,O.prototype._msg_queue=null,O.prototype._connectTimeout,O.prototype.sendPinger=null,O.prototype.receivePinger=null,O.prototype.receiveBuffer=null,O.prototype._traceBuffer=null,O.prototype._MAX_TRACE_ENTRIES=100,O.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(y(v.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(y(v.INVALID_STATE,["already connected"]));this.connectOptions=e,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},O.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var n=new _(d.SUBSCRIBE);n.topics=[e],void 0!=t.qos?n.requestedQos=[t.qos]:n.requestedQos=[0],t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e})}),t.timeout&&(n.timeOut=new T(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:v.SUBSCRIBE_TIMEOUT.code,errorMessage:y(v.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},O.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var n=new _(d.UNSUBSCRIBE);n.topics=[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new T(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:v.UNSUBSCRIBE_TIMEOUT.code,errorMessage:y(v.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},O.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var t=new _(d.PUBLISH);t.payloadMessage=e,e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t)},O.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw new Error(y(v.INVALID_STATE,["not connecting or connected"]));var e=new _(d.DISCONNECT);this._notify_msg_sent[e]=h(this._disconnected,this),this._schedule_message(e)},O.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var e in this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},O.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,f)},O.prototype.stopTrace=function(){delete this._traceBuffer},O.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=h(this._on_socket_open,this),this.socket.onmessage=h(this._on_socket_message,this),this.socket.onerror=h(this._on_socket_error,this),this.socket.onclose=h(this._on_socket_close,this),this.sendPinger=new w(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new w(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new T(this,window,this.connectOptions.timeout,this._disconnected,[v.CONNECT_TIMEOUT.code,y(v.CONNECT_TIMEOUT)])},O.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},O.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case d.PUBLISH:t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var r="",o=t.payloadMessage.payloadBytes,i=0;i<o.length;i++)o[i]<=15?r=r+"0"+o[i].toString(16):r+=o[i].toString(16);n.payloadMessage.payloadHex=r,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence);break;default:throw Error(y(v.INVALID_STORED_DATA,[key,n]))}localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},O.prototype.restore=function(e){var t=localStorage.getItem(e),n=JSON.parse(t),o=new _(n.type,n);switch(n.type){case d.PUBLISH:for(var i=n.payloadMessage.payloadHex,s=new ArrayBuffer(i.length/2),a=new Uint8Array(s),c=0;i.length>=2;){var u=parseInt(i.substring(0,2),16);i=i.substring(2,i.length),a[c++]=u}var l=new r.MQTT.Message(a);l.qos=n.payloadMessage.qos,l.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(l.duplicate=!0),n.payloadMessage.retained&&(l.retained=!0),o.payloadMessage=l;break;default:throw Error(y(v.INVALID_STORED_DATA,[e,t]))}0==e.indexOf("Sent:"+this._localKey)?(o.payloadMessage.duplicate=!0,this._sentMessages[o.messageIdentifier]=o):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[o.messageIdentifier]=o)},O.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},O.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===d.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},O.prototype._on_socket_open=function(){var e=new _(d.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},O.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},O.prototype._deframeMessages=function(e){var n=new Uint8Array(e);if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+n.length);r.set(this.receiveBuffer),r.set(n,this.receiveBuffer.length),n=r,delete this.receiveBuffer}try{for(var o=0,i=[];o<n.length;){var s=t(n,o),a=s[0];if(o=s[1],null===a)break;i.push(a)}o<n.length&&(this.receiveBuffer=n.subarray(o))}catch(c){return void this._disconnected(v.INTERNAL_ERROR.code,y(v.INTERNAL_ERROR,[c.message,c.stack.toString()]))}return i},O.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case d.CONNACK:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+n.messageIdentifier)}this._sentMessages={};for(var t in this._receivedMessages){var r=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+r.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(v.CONNACK_RETURNCODE.code,y(v.CONNACK_RETURNCODE,[e.returnCode,g[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var o=new Array;for(var i in this._sentMessages)this._sentMessages.hasOwnProperty(i)&&o.push(this._sentMessages[i]);for(var o=o.sort(function(e,t){return e.sequence-t.sequence}),s=0,a=o.length;s<a;s++){var n=o[s];if(n.type==d.PUBLISH&&n.pubRecReceived){var c=new _(d.PUBREL,{messageIdentifier:n.messageIdentifier});this._schedule_message(c)}else this._schedule_message(n)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case d.PUBLISH:this._receivePublish(e);break;case d.PUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case d.PUBREC:var n=this._sentMessages[e.messageIdentifier];if(n){n.pubRecReceived=!0;var c=new _(d.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",n),this._schedule_message(c)}break;case d.PUBREL:var r=this._receivedMessages[e.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),r&&(this._receiveMessage(r),delete this._receivedMessages[e.messageIdentifier]);var u=new _(d.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(u);break;case d.PUBCOMP:var n=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case d.SUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),e.returnCode.indexOf=Array.prototype.indexOf,e.returnCode.indexOf(128)!==-1?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case d.UNSUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case d.PINGRESP:this.sendPinger.reset();break;case d.DISCONNECT:this._disconnected(v.INVALID_MQTT_MESSAGE_TYPE.code,y(v.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(v.INVALID_MQTT_MESSAGE_TYPE.code,y(v.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(l){return void this._disconnected(v.INTERNAL_ERROR.code,y(v.INTERNAL_ERROR,[l.message,l.stack.toString()]))}},O.prototype._on_socket_error=function(e){this._disconnected(v.SOCKET_ERROR.code,y(v.SOCKET_ERROR,[e.data]))},O.prototype._on_socket_close=function(){this._disconnected(v.SOCKET_CLOSE.code,y(v.SOCKET_CLOSE))},O.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},O.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new _(d.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new _(d.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},O.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},O.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=v.OK.code,t=y(v.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},O.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)"undefined"!=typeof arguments[e]&&(arguments[e]=JSON.stringify(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer)for(var e=0,n=arguments.length;e<n;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):"undefined"==typeof arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))},O.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==t?n[r]="******":n[r]=e[r]);return n};var E=function(e,t,r,o){var i;if("string"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"host"]));if(2==arguments.length){o=t,i=e;var s=i.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!s)throw new Error(y(v.INVALID_ARGUMENT,[e,"host"]));e=s[4]||s[2],t=parseInt(s[7]),r=s[8]}else{if(3==arguments.length&&(o=r,r="/mqtt"),"number"!=typeof t||t<0)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof t?"undefined":n(t),"port"]));if("string"!=typeof r)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof r?"undefined":n(r),"path"]));var a=e.indexOf(":")!=-1&&"["!=e.slice(0,1)&&"]"!=e.slice(-1);i="ws://"+(a?"["+e+"]":e)+":"+t+r}for(var c=0,u=0;u<o.length;u++){var l=o.charCodeAt(u);55296<=l&&l<=56319&&u++,c++}if("string"!=typeof o||c>65535)throw new Error(y(v.INVALID_ARGUMENT,[o,"clientId"]));var f=new O(i,e,t,r,o);this._getHost=function(){return e},this._setHost=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getPath=function(){return r},this._setPath=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getURI=function(){return i},this._setURI=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getClientId=function(){return f.clientId},this._setClientId=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return f.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onConnectionLost"]));f.onConnectionLost=e},this._getOnMessageDelivered=function(){return f.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onMessageDelivered"]));f.onMessageDelivered=e},this._getOnMessageArrived=function(){return f.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onMessageArrived"]));f.onMessageArrived=e},this._getTrace=function(){return f.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onTrace"]));f.traceFunction=e},this.connect=function(e){if(e=e||{},p(e,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(y(v.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0===e.password&&void 0!==e.userName)throw new Error(y(v.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof I))throw new Error(y(v.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,"undefined"==typeof e.willMessage.destinationName)throw new Error(y(v.INVALID_TYPE,[n(e.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if("undefined"==typeof e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(y(v.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,o=0;o<e.hosts.length;o++){if("string"!=typeof e.hosts[o])throw new Error(y(v.INVALID_TYPE,[n(e.hosts[o]),"connectOptions.hosts["+o+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[o])){if(0==o)t=!0;else if(!t)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}else if(t)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(var o=0;o<e.hosts.length;o++){if("number"!=typeof e.ports[o]||e.ports[o]<0)throw new Error(y(v.INVALID_TYPE,[n(e.ports[o]),"connectOptions.ports["+o+"]"]));var s=e.hosts[o],a=e.ports[o],c=s.indexOf(":")!=-1;i="ws://"+(c?"["+s+"]":s)+":"+a+r,e.uris.push(i)}}}f.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},p(t,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if("undefined"!=typeof t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(y(v.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));f.subscribe(e,t);
},this.unsubscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},p(t,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");f.unsubscribe(e,t)},this.send=function(e,t,r,o){var i;if(0==arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof I)&&"string"!=typeof e)throw new Error("Invalid argument:"+("undefined"==typeof e?"undefined":n(e)));if(i=e,"undefined"==typeof i.destinationName)throw new Error(y(v.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));f.send(i)}else i=new I(t),i.destinationName=e,arguments.length>=3&&(i.qos=r),arguments.length>=4&&(i.retained=o),f.send(i)},this.disconnect=function(){f.disconnect()},this.getTraceLog=function(){return f.getTraceLog()},this.startTrace=function(){f.startTrace()},this.stopTrace=function(){f.stopTrace()},this.isConnected=function(){return f.connected}};E.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var I=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw y(v.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:l(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(c(t)),n=new Uint8Array(e);return u(t,n,0),n}return t};var n=void 0;this._getDestinationName=function(){return n},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(y(v.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e};var r=0;this._getQos=function(){return r},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e};var o=!1;this._getRetained=function(){return o},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(y(v.INVALID_ARGUMENT,[e,"newRetained"]));o=e};var i=!1;this._getDuplicate=function(){return i},this._setDuplicate=function(e){i=e}};return I.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:E,Message:I}}(window),e.exports=r}]);